<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>ëƒ¥10 â€” ìˆ«ì ê³ ì–‘ì´ í¼ì¦</title>
<meta name="description" content="í•©ì´ 10ì´ ë˜ë©´ ëƒ¥~âœ¨ ê·€ì—¬ìš´ ê³ ì–‘ì´ë“¤ê³¼ í•¨ê»˜í•˜ëŠ” 60ì´ˆ ìˆ«ì í¼ì¦ ê²Œì„! ì „êµ­ ë­í‚¹ ë„ì „!">
<meta property="og:title" content="ëƒ¥10 ğŸ± â€” ìˆ«ì ê³ ì–‘ì´ í¼ì¦">
<meta property="og:description" content="í•©ì´ 10ì´ ë˜ë©´ ëƒ¥~âœ¨ 60ì´ˆ ì•ˆì— ìµœëŒ€í•œ ë§ì´! ì§€ê¸ˆ ë°”ë¡œ ë„ì „í•´ë³´ì„¸ìš”">
<meta property="og:image" content="https://nyang10game.github.io/nyang/og-image.png">
<meta property="og:url" content="https://nyang10game.github.io/nyang/">
<meta property="og:type" content="website">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="ëƒ¥10 ğŸ± â€” ìˆ«ì ê³ ì–‘ì´ í¼ì¦">
<meta name="twitter:description" content="í•©ì´ 10ì´ ë˜ë©´ ëƒ¥~âœ¨ 60ì´ˆ ìˆ«ì í¼ì¦, ì „êµ­ ë­í‚¹ ë„ì „!">
<meta name="twitter:image" content="https://nyang10game.github.io/nyang/og-image.png">
<meta name="theme-color" content="#ff6eb4">
<link rel="manifest" href="manifest.json">
<script>
if(!CanvasRenderingContext2D.prototype.roundRect){
  CanvasRenderingContext2D.prototype.roundRect=function(x,y,w,h,r){
    this.beginPath();this.moveTo(x+r,y);this.lineTo(x+w-r,y);
    this.quadraticCurveTo(x+w,y,x+w,y+r);this.lineTo(x+w,y+h-r);
    this.quadraticCurveTo(x+w,y+h,x+w-r,y+h);this.lineTo(x+r,y+h);
    this.quadraticCurveTo(x,y+h,x,y+h-r);this.lineTo(x,y+r);
    this.quadraticCurveTo(x,y,x+r,y);this.closePath();
  };
}
</script>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@700;800;900&display=swap" rel="stylesheet">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8375396580965138" crossorigin="anonymous"></script>
<style>
:root{--bg:#fef6ff;--surface:#fff;--pink:#ff6eb4;--pink-dark:#d94d96;--mint:#4ecdc4;--red:#ff4f4f;--yellow:#ffcc00;--border:#f0d4f0;--shadow:rgba(200,100,200,0.12);--text:#3d2645;--dim:#b89db8;--c1:#ffadad;--c2:#ffcb8a;--c3:#fdffb6;--c4:#b5ead7;--c5:#a8e6f0;--c6:#a0c4ff;--c7:#c5b8ff;--c8:#ffb3de;--c9:#ff9090;--d1:#e05080;--d2:#d07020;--d3:#a89000;--d4:#30a870;--d5:#1890b0;--d6:#3060c0;--d7:#6040c0;--d8:#c040a0;--d9:#c02020;}
body.night{--bg:#1a1025;--surface:#2a1f35;--border:#3d2d50;--shadow:rgba(0,0,0,0.4);--text:#f0e0ff;--dim:#8a6a9a;--c1:#c45050;--c2:#b07030;--c3:#909060;--c4:#3a7a5a;--c5:#2a6a80;--c6:#2a50a0;--c7:#5a3a9a;--c8:#a03070;--c9:#b03030;}
body.night .live-bar,body.night .rule-card,body.night .sum-bar,body.night .pvp-bar,body.night .lb-card,body.night .settings-sheet,body.night .tut-box{background:#2a1f35;}
body.night .mute-btn,body.night .settings-btn{background:#2a1f35;}
body.night .settings-close{background:#3d2d50;color:#f0e0ff;}
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent;}
body{background:var(--bg);font-family:'Nunito',sans-serif;min-height:100dvh;display:flex;flex-direction:column;align-items:center;overflow:hidden;user-select:none;}
.screen{width:100%;max-width:420px;min-height:100dvh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:16px 14px;position:absolute;top:0;left:50%;transform:translateX(-50%);transition:opacity .2s,transform .2s;z-index:1;pointer-events:auto;}
.screen.hidden{opacity:0;pointer-events:none;transform:translateX(-50%) scale(.97);z-index:0;}
.logo-emoji{font-size:68px;display:block;text-align:center;animation:boing 2s ease-in-out infinite;}
@keyframes boing{0%,100%{transform:translateY(0) rotate(-4deg)}50%{transform:translateY(-10px) rotate(4deg)}}
.logo-title{font-size:60px;font-weight:900;text-align:center;line-height:1;color:var(--pink);text-shadow:0 5px 0 var(--pink-dark);letter-spacing:-1px;margin-top:4px;}
.logo-sub{font-size:12px;color:var(--dim);letter-spacing:3px;text-align:center;margin-bottom:14px;}
.live-bar{width:100%;background:white;border-radius:14px;border:2px solid var(--border);padding:10px 16px;margin-bottom:12px;box-shadow:0 3px 12px var(--shadow);display:flex;align-items:center;justify-content:space-between;}
.live-dot{width:8px;height:8px;border-radius:50%;background:#ff4f4f;animation:blink 1s infinite;}
@keyframes blink{0%,100%{opacity:1}50%{opacity:.2}}
.live-txt{font-size:13px;font-weight:800;color:var(--text);}
.live-cnt{font-size:14px;font-weight:900;color:var(--pink);}
.rule-card{background:white;border-radius:22px;padding:12px 18px;width:100%;margin-bottom:14px;box-shadow:0 4px 20px var(--shadow);border:2px solid var(--border);}
.rule-item{display:flex;align-items:center;gap:10px;font-size:14px;font-weight:800;color:var(--text);padding:5px 0;border-bottom:1px solid var(--border);}
.rule-item:last-child{border:none;}
.ri{font-size:20px;width:28px;text-align:center;}
.btn-play{width:100%;height:62px;border:none;border-radius:22px;background:linear-gradient(135deg,#ff6eb4,#ff9fd3);color:white;font-family:'Nunito',sans-serif;font-size:22px;font-weight:900;cursor:pointer;box-shadow:0 7px 0 var(--pink-dark);transition:transform .1s,box-shadow .1s;position:relative;overflow:hidden;}
.btn-play::after{content:'';position:absolute;top:0;left:-100%;width:55%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.25),transparent);transform:skewX(-15deg);animation:shine 2.2s infinite;}
@keyframes shine{to{left:200%;}}
.btn-play:active{transform:translateY(4px);box-shadow:0 3px 0 var(--pink-dark);}
.mute-btn{position:fixed;top:12px;right:14px;z-index:9999;width:38px;height:38px;border-radius:50%;border:2px solid var(--border);background:white;font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px var(--shadow);}
.settings-btn{position:fixed;top:12px;left:14px;z-index:9999;width:38px;height:38px;border-radius:50%;border:2px solid var(--border);background:white;font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px var(--shadow);}
.settings-modal{position:fixed;inset:0;z-index:500;display:flex;align-items:flex-end;justify-content:center;background:rgba(61,38,69,.45);backdrop-filter:blur(4px);}
.settings-modal.hidden{display:none;}
.settings-sheet{width:100%;max-width:420px;background:white;border-radius:28px 28px 0 0;padding:20px 20px 36px;box-shadow:0 -8px 40px rgba(200,100,200,.2);animation:slideUp .3s cubic-bezier(.2,1.3,.5,1);position:relative;}
@keyframes slideUp{from{transform:translateY(100%);}to{transform:translateY(0);}}
.settings-title{font-size:20px;font-weight:900;color:var(--text);text-align:center;margin-bottom:18px;}
.settings-close{position:absolute;top:16px;right:18px;background:var(--border);border:none;border-radius:50%;width:32px;height:32px;font-size:16px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-weight:900;}
.settings-row{display:flex;align-items:center;justify-content:space-between;padding:10px 0;border-bottom:1px solid var(--border);}
.settings-label{font-size:14px;font-weight:800;color:var(--text);display:flex;align-items:center;gap:8px;}
.toggle-btn{width:54px;height:28px;border-radius:14px;border:none;cursor:pointer;position:relative;transition:background .2s;background:#ddd;}
.toggle-btn.on{background:var(--pink);}
.toggle-btn::after{content:'';position:absolute;top:3px;left:3px;width:22px;height:22px;border-radius:50%;background:white;transition:transform .2s;box-shadow:0 2px 4px rgba(0,0,0,.15);}
.toggle-btn.on::after{transform:translateX(26px);}
.settings-section{font-size:11px;font-weight:800;letter-spacing:2px;color:var(--dim);text-transform:uppercase;margin:14px 0 8px;}
.skin-grid{display:flex;gap:8px;flex-wrap:wrap;}
.skin-opt{width:54px;height:54px;border-radius:14px;border:3px solid var(--border);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1px;cursor:pointer;transition:border-color .15s,transform .1s;}
.skin-opt.active{border-color:var(--pink);transform:scale(1.1);}
.skin-opt .s-emoji{font-size:16px;line-height:1;}
.skin-opt .s-num{font-size:20px;font-weight:900;color:white;text-shadow:0 1px 4px rgba(0,0,0,.2);line-height:1;}
.theme-grid{display:flex;gap:8px;flex-wrap:wrap;}
.theme-opt{width:46px;height:46px;border-radius:12px;border:3px solid var(--border);cursor:pointer;transition:border-color .15s,transform .1s;}
.theme-opt.active{border-color:var(--pink);transform:scale(1.1);}
.settings-save{width:100%;height:50px;border:none;border-radius:16px;background:linear-gradient(135deg,#ff6eb4,#ff9fd3);color:white;font-family:'Nunito',sans-serif;font-size:18px;font-weight:900;cursor:pointer;margin-top:18px;box-shadow:0 5px 0 var(--pink-dark);}
.settings-save:active{transform:translateY(3px);box-shadow:0 2px 0 var(--pink-dark);}
.restart-btn{width:38px;height:38px;border-radius:50%;border:2px solid var(--border);background:white;font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px var(--shadow);}
.restart-btn:active{transform:scale(.9);}
body.night .restart-btn{background:#2a1f35;}
.restart-modal{position:fixed;inset:0;z-index:400;background:rgba(61,38,69,.7);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;}
.restart-modal.hidden{display:none;}
.restart-box{background:white;border-radius:24px;padding:24px 20px;width:80%;max-width:300px;display:flex;flex-direction:column;align-items:center;gap:10px;box-shadow:0 20px 60px rgba(200,100,200,.3);}
body.night .restart-box{background:#2a1f35;}
.top-hud{width:100%;display:flex;align-items:center;justify-content:space-between;padding:0 4px;margin-bottom:6px;}
.timer-ring-wrap{position:relative;width:72px;height:72px;display:flex;align-items:center;justify-content:center;}
.timer-ring-wrap svg{position:absolute;top:0;left:0;transform:rotate(-90deg);}
.tr-bg{fill:none;stroke:var(--border);stroke-width:5;}
.tr-fg{fill:none;stroke:var(--pink);stroke-width:5;stroke-linecap:round;transition:stroke-dashoffset 1s linear,stroke .3s;}
.timer-n{font-size:28px;font-weight:900;color:var(--text);position:relative;z-index:1;}
.score-block{text-align:right;}
.score-lbl{font-size:9px;font-weight:800;letter-spacing:2px;color:var(--dim);text-transform:uppercase;}
.score-val{font-size:48px;font-weight:900;color:var(--pink);line-height:1;text-shadow:0 3px 0 var(--pink-dark);}
.score-val.pop{animation:pop .15s ease;}
@keyframes pop{0%,100%{transform:scale(1)}50%{transform:scale(1.2)}}
.combo-pill{background:linear-gradient(135deg,#c5b8ff,#a0c4ff);border-radius:20px;padding:2px 10px;font-size:12px;font-weight:900;color:white;opacity:.2;transition:opacity .2s;display:inline-block;margin-top:2px;}
.combo-pill.on{opacity:1;animation:cPop .2s ease;}
@keyframes cPop{0%,100%{transform:scale(1)}50%{transform:scale(1.2)}}
.pvp-bar{width:100%;background:white;border-radius:10px;border:2px solid var(--border);padding:4px 10px;margin-bottom:4px;box-shadow:0 2px 8px var(--shadow);display:flex;align-items:center;gap:6px;}
.pvp-name{font-size:10px;font-weight:800;color:var(--dim);white-space:nowrap;}
.pvp-pts{font-size:10px;font-weight:900;color:var(--text);white-space:nowrap;}
.pvp-track{flex:1;height:5px;background:var(--border);border-radius:4px;overflow:hidden;position:relative;}
.pvp-me{height:100%;background:linear-gradient(90deg,var(--pink),#ff9fd3);border-radius:4px;transition:width .4s ease;width:0%;position:absolute;top:0;left:0;z-index:2;}
.pvp-opp{height:100%;background:linear-gradient(90deg,#a0c4ff,#c5b8ff);border-radius:4px;transition:width .4s ease;width:0%;position:absolute;top:0;left:0;z-index:1;}
.pvp-status{font-size:10px;font-weight:900;white-space:nowrap;}
.sum-bar{width:100%;height:38px;background:white;border-radius:12px;border:2px solid var(--border);display:flex;align-items:center;justify-content:space-between;padding:0 12px;margin-bottom:4px;box-shadow:0 2px 10px var(--shadow);transition:border-color .2s,background .2s;}
.sum-bar.exact{border-color:var(--mint);background:#f0fffd;}
.sum-bar.shake{animation:shake .3s ease;}
@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-8px)}75%{transform:translateX(8px)}}
.sum-bar.close-glow{border-color:var(--yellow);animation:closeGlow .5s ease-in-out infinite alternate;}
@keyframes closeGlow{from{box-shadow:0 0 0 0 rgba(255,200,0,.3);}to{box-shadow:0 0 12px 4px rgba(255,200,0,.5);}}
.sum-lbl{font-size:10px;font-weight:800;color:var(--dim);}
.sum-num{font-size:22px;font-weight:900;color:var(--text);}
.sum-num.exact{color:var(--mint);}
.sum-num.close{color:var(--yellow);}
.sum-tip{font-size:11px;font-weight:800;color:var(--dim);text-align:right;max-width:42%;}
.sum-tip.exact{color:var(--mint);}
.combo-burst{position:fixed;left:50%;top:40%;transform:translate(-50%,-50%);pointer-events:none;z-index:200;font-family:'Nunito',sans-serif;font-weight:900;text-align:center;animation:comboB .55s cubic-bezier(.2,1.3,.5,1) forwards;}
@keyframes comboB{0%{opacity:0;transform:translate(-50%,-50%) scale(.3);}30%{opacity:1;transform:translate(-50%,-50%) scale(1.2);}60%{opacity:1;transform:translate(-50%,-50%) scale(1);}100%{opacity:0;transform:translate(-50%,-60%) scale(.8);}}
.grid-wrap{width:100%;border-radius:14px;overflow:visible;background:white;border:2px solid var(--border);box-shadow:0 4px 20px var(--shadow);padding:5px;}
.grid{display:grid;grid-template-columns:repeat(4,1fr);gap:5px;}
.grid-cell{aspect-ratio:1;position:relative;border-radius:10px;background:var(--bg);border:2px dashed var(--border);}
.tile{position:absolute;inset:2px;border-radius:10px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:transform .1s;will-change:transform;}
.tile:active{transform:scale(.88)!important;}
.tile.selected{transform:scale(1.06) translateY(-3px)!important;z-index:10;animation:tJump .28s ease;}
@keyframes tJump{0%{transform:scale(1) translateY(0)}40%{transform:scale(1.1) translateY(-6px)}100%{transform:scale(1.06) translateY(-3px)}}
.tile.selected .ti{box-shadow:0 0 0 2px white,0 0 0 4px var(--pink),0 8px 20px rgba(255,110,180,.5);}
.ti{width:100%;height:100%;border-radius:10px;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:1px;box-shadow:0 4px 0 rgba(0,0,0,.09);position:relative;overflow:hidden;transition:box-shadow .12s;}
.ti::after{content:'';position:absolute;top:-20%;left:-20%;width:45%;height:45%;background:rgba(255,255,255,.28);border-radius:50%;pointer-events:none;}
.t-emoji{font-size:clamp(13px,3.5vw,18px);line-height:1;pointer-events:none;position:relative;z-index:1;}
.tnum{font-size:clamp(24px,7vw,34px);font-weight:900;color:white;position:relative;z-index:1;text-shadow:0 2px 6px rgba(0,0,0,.22);line-height:1;}
.t1 .ti{background:var(--c1);}.t2 .ti{background:var(--c2);}.t3 .ti{background:var(--c3);}.t4 .ti{background:var(--c4);}.t5 .ti{background:var(--c5);}.t6 .ti{background:var(--c6);}.t7 .ti{background:var(--c7);}.t8 .ti{background:var(--c8);}.t9 .ti{background:var(--c9);}
.combo5-flash{position:fixed;inset:0;pointer-events:none;z-index:70;animation:c5flash .6s ease forwards;}
@keyframes c5flash{0%{opacity:0;}15%{opacity:1;filter:invert(.9) hue-rotate(90deg);}40%{filter:invert(.5) hue-rotate(0deg);}70%{opacity:.5;}100%{opacity:0;filter:invert(0);}}
.flash-ov{position:fixed;inset:0;pointer-events:none;z-index:60;opacity:0;}
.flash-ov.ok{animation:flashOK .5s ease;}
.flash-ov.ng{animation:flashNG .4s ease;}
@keyframes flashOK{0%{opacity:0;}15%{opacity:1;background:rgba(78,205,196,.45);}100%{opacity:0;}}
@keyframes flashNG{0%{opacity:0;}15%{opacity:1;background:rgba(255,60,60,.4);}100%{opacity:0;}}
body.shakebody{animation:bodyShake .45s ease;}
@keyframes bodyShake{0%,100%{transform:translateX(0)}15%{transform:translateX(-12px) rotate(-1deg)}30%{transform:translateX(12px) rotate(1deg)}45%{transform:translateX(-8px)}60%{transform:translateX(8px)}75%{transform:translateX(-4px)}90%{transform:translateX(4px)}}
.grid-wrap.success-zoom{animation:gridZoom .35s ease;}
@keyframes gridZoom{0%,100%{transform:scale(1)}40%{transform:scale(1.04)}70%{transform:scale(.98)}}
.combo-flash{position:fixed;inset:0;pointer-events:none;z-index:55;opacity:0;animation:comboFlash .5s ease forwards;}
@keyframes comboFlash{0%{opacity:0}20%{opacity:.7}100%{opacity:0}}
.panic-border{position:fixed;inset:0;pointer-events:none;z-index:50;}
.panic-border.on{animation:panicP .4s ease-in-out infinite alternate;}
@keyframes panicP{from{box-shadow:inset 0 0 0 4px rgba(255,60,60,.4),inset 0 0 30px rgba(255,60,60,.1);}to{box-shadow:inset 0 0 0 10px rgba(255,60,60,.9),inset 0 0 70px rgba(255,60,60,.4);}}
.fx{position:fixed;pointer-events:none;z-index:999;font-family:'Nunito',sans-serif;font-weight:900;transform:translateX(-50%);animation:fxUp 1s ease forwards;}
@keyframes fxUp{0%{opacity:1;transform:translateX(-50%) translateY(0) scale(1.2);}20%{opacity:1;transform:translateX(-50%) translateY(-10px) scale(1);}100%{opacity:0;transform:translateX(-50%) translateY(-80px) scale(.7);}}
.pt{position:fixed;pointer-events:none;z-index:998;border-radius:50%;animation:ptFly .7s ease forwards;}
@keyframes ptFly{0%{opacity:1;transform:translate(0,0) scale(1);}100%{opacity:0;transform:translate(var(--tx),var(--ty)) scale(0);}}
.milestone{position:fixed;top:20%;left:50%;transform:translateX(-50%);background:white;border-radius:30px;padding:12px 26px;border:3px solid var(--pink);font-size:20px;font-weight:900;color:var(--pink);box-shadow:0 10px 40px rgba(255,110,180,.4);z-index:200;white-space:nowrap;animation:msA 2s ease forwards;pointer-events:none;}
@keyframes msA{0%{opacity:0;transform:translateX(-50%) scale(.5);}15%{opacity:1;transform:translateX(-50%) scale(1.15);}50%{opacity:1;transform:translateX(-50%) scale(1);}100%{opacity:0;transform:translateX(-50%) translateY(-24px);}}
#resultScreen{gap:5px;justify-content:flex-start;padding-top:14px;padding-bottom:20px;overflow-y:auto;}
.res-emoji{font-size:52px;animation:boing 2s ease-in-out infinite;}
.res-top{font-size:11px;font-weight:800;letter-spacing:3px;color:var(--dim);text-transform:uppercase;}
.res-grade{font-size:17px;font-weight:900;padding:5px 18px;border-radius:30px;}
.res-score{font-size:clamp(60px,18vw,88px);font-weight:900;color:var(--pink);line-height:1;text-shadow:0 5px 0 var(--pink-dark);}
.res-sub{font-size:13px;font-weight:800;color:var(--dim);}
.res-sub b{color:var(--text);}
.res-rank{font-size:13px;font-weight:900;color:var(--mint);}
.res-best{font-size:12px;font-weight:800;color:var(--dim);}
.res-best b{color:var(--pink);}
.res-best-gap{font-size:13px;font-weight:900;color:var(--mint);text-align:center;min-height:18px;}
.lb-card{width:100%;background:white;border-radius:16px;border:2px solid var(--border);padding:10px 14px;box-shadow:0 3px 16px var(--shadow);}
.lb-title{font-size:11px;font-weight:800;letter-spacing:2px;color:var(--dim);text-transform:uppercase;margin-bottom:6px;}
.lb-row{display:flex;align-items:center;justify-content:space-between;padding:4px 0;border-bottom:1px solid var(--border);font-size:12px;font-weight:800;color:var(--text);}
.lb-row:last-child{border:none;}
.lb-row.me{color:var(--pink);}
.lb-rank{width:24px;}.lb-name{flex:1;}
.btn-retry{width:100%;height:54px;border:none;border-radius:18px;background:linear-gradient(135deg,#ff6eb4,#ff9fd3);color:white;font-family:'Nunito',sans-serif;font-size:20px;font-weight:900;cursor:pointer;box-shadow:0 6px 0 var(--pink-dark);transition:transform .1s,box-shadow .1s;position:relative;overflow:hidden;}
.btn-retry::after{content:'';position:absolute;top:0;left:-100%;width:55%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.25),transparent);transform:skewX(-15deg);animation:shine 1.5s infinite;}
.btn-retry:active{transform:translateY(4px);box-shadow:0 2px 0 var(--pink-dark);}
.retry-hint{font-size:10px;font-weight:800;color:var(--dim);letter-spacing:1px;text-align:center;}
.share-section{width:100%;}
.share-label{font-size:11px;font-weight:800;letter-spacing:2px;color:var(--dim);text-align:center;margin-bottom:8px;text-transform:uppercase;}
.share-grid{display:flex;justify-content:center;gap:10px;margin-bottom:4px;}
.share-btn{width:52px;height:52px;border-radius:16px;border:none;font-size:22px;font-weight:900;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 0 rgba(0,0,0,.1);transition:transform .1s,box-shadow .1s;}
.share-btn:active{transform:translateY(3px);box-shadow:0 1px 0 rgba(0,0,0,.1);}
.share-x{background:#000;color:#fff;}
.share-threads{background:linear-gradient(135deg,#000,#333);color:#fff;}
.share-kakao{background:#fee500;color:#3c1e1e;}
.share-link{background:linear-gradient(135deg,var(--mint),#7ee8e0);color:#fff;}
.share-native{background:linear-gradient(135deg,var(--pink),#ff9fd3);color:#fff;}
.share-labels-row{display:flex;justify-content:center;gap:10px;}
.share-labels-row span{width:52px;text-align:center;font-size:9px;font-weight:800;color:var(--dim);}
body.night .share-btn{box-shadow:0 4px 0 rgba(0,0,0,.3);}
.cd-ov{position:fixed;inset:0;background:rgba(254,246,255,.93);display:flex;align-items:center;justify-content:center;flex-direction:column;gap:6px;z-index:100;}
.cd-ov.hidden{display:none;}
.cd-n{font-size:130px;font-weight:900;color:var(--pink);text-shadow:0 10px 0 var(--pink-dark);animation:cdPop .8s ease;}
@keyframes cdPop{0%{transform:scale(2);opacity:0;}30%{transform:scale(1);opacity:1;}80%{transform:scale(1);opacity:1;}100%{transform:scale(.7);opacity:0;}}
.cd-sub{font-size:14px;font-weight:800;color:var(--dim);}
.go-flash{position:fixed;inset:0;pointer-events:none;z-index:100;display:flex;align-items:center;justify-content:center;}
.go-flash.hidden{display:none;}
.go-txt{font-family:'Nunito',sans-serif;font-size:100px;font-weight:900;color:var(--pink);text-shadow:0 8px 0 var(--pink-dark);animation:goAnim .6s ease forwards;}
@keyframes goAnim{0%{transform:scale(2);opacity:0;}25%{transform:scale(1);opacity:1;}75%{transform:scale(1);opacity:1;}100%{transform:scale(.5);opacity:0;}}
.daily-challenge{width:100%;background:linear-gradient(135deg,#fff8e1,#fff3cd);border:2px solid #ffcc00;border-radius:14px;padding:8px 14px;display:flex;align-items:center;gap:8px;margin-bottom:10px;box-shadow:0 2px 8px rgba(255,200,0,.15);}
body.night .daily-challenge{background:linear-gradient(135deg,#2a2010,#1e1a08);border-color:#aa8800;}
.dc-badge{font-size:10px;font-weight:900;color:#a07000;white-space:nowrap;}
.dc-text{flex:1;font-size:12px;font-weight:800;color:var(--text);}
.dc-status{font-size:18px;}
.skin-opt.locked{opacity:.5;position:relative;}
.skin-opt.locked::after{content:'ğŸ”’';position:absolute;font-size:18px;top:50%;left:50%;transform:translate(-50%,-50%);}
.best-burst{position:fixed;inset:0;z-index:300;display:flex;align-items:center;justify-content:center;pointer-events:none;}
.best-burst.hidden{display:none;}
.best-burst-inner{background:linear-gradient(135deg,#ffcc00,#ff9fd3);border-radius:30px;padding:18px 36px;font-family:'Nunito',sans-serif;font-size:28px;font-weight:900;color:white;text-shadow:0 3px 0 rgba(0,0,0,.15);box-shadow:0 10px 40px rgba(255,200,0,.5);animation:bestPop 2s ease forwards;}
@keyframes bestPop{0%{opacity:0;transform:scale(.3);}20%{opacity:1;transform:scale(1.15);}40%{transform:scale(1);}75%{opacity:1;}100%{opacity:0;transform:scale(.9) translateY(-20px);}}
.tut-ov{position:fixed;inset:0;z-index:400;background:rgba(61,38,69,.7);backdrop-filter:blur(6px);display:flex;align-items:center;justify-content:center;}
.tut-ov.hidden{display:none;}
.tut-box{background:white;border-radius:28px;padding:28px 24px;width:88%;max-width:360px;display:flex;flex-direction:column;align-items:center;gap:12px;box-shadow:0 20px 60px rgba(200,100,200,.3);}
.tut-emoji{font-size:52px;animation:boing 2s ease-in-out infinite;}
.tut-title{font-size:22px;font-weight:900;color:var(--text);}
.tut-step{width:100%;font-size:14px;font-weight:800;color:var(--text);background:var(--bg);border-radius:12px;padding:10px 14px;border:2px solid var(--border);}
.tut-btn{width:100%;height:52px;border:none;border-radius:18px;background:linear-gradient(135deg,#ff6eb4,#ff9fd3);color:white;font-family:'Nunito',sans-serif;font-size:20px;font-weight:900;cursor:pointer;box-shadow:0 6px 0 var(--pink-dark);margin-top:4px;}
.tut-btn:active{transform:translateY(3px);box-shadow:0 3px 0 var(--pink-dark);}
.lang-bar{position:fixed;top:12px;left:50%;transform:translateX(-50%);z-index:9999;display:flex;gap:4px;}
.lang-btn{height:28px;padding:0 10px;border-radius:20px;border:2px solid var(--border);background:white;font-family:'Nunito',sans-serif;font-size:11px;font-weight:900;cursor:pointer;color:var(--dim);transition:all .15s;box-shadow:0 2px 8px var(--shadow);}
.lang-btn.active{background:var(--pink);border-color:var(--pink);color:white;}
body.night .lang-btn{background:#2a1f35;}
body.night .lang-btn.active{background:var(--pink);color:white;}
</style>
</head>
<body>
<div class="panic-border" id="panicBorder"></div>
<div class="flash-ov" id="flashOv"></div>
<div class="lang-bar"><button class="lang-btn active" id="lb_ko" onclick="nLang('ko')">í•œêµ­ì–´</button><button class="lang-btn" id="lb_en" onclick="nLang('en')">English</button><button class="lang-btn" id="lb_ja" onclick="nLang('ja')">æ—¥æœ¬èª</button></div>
<button class="settings-btn" onclick="openSettings()" title="ì„¤ì •">âš™ï¸</button>
<button class="mute-btn" id="muteBtn" onclick="toggleMute()" title="ìŒì†Œê±°">ğŸ”Š</button>

<div class="settings-modal hidden" id="settingsModal" onclick="closeSettingsBg(event)">
  <div class="settings-sheet">
    <div class="settings-title" id="nSettingsTitle">âš™ï¸ ì„¤ì •</div>
    <button class="settings-close" onclick="closeSettings()">âœ•</button>
    <div class="settings-row" style="flex-direction:column;align-items:flex-start;gap:8px;">
      <span class="settings-label" id="nNicknameLabel">ğŸ˜º ë‹‰ë„¤ì„</span>
      <div style="display:flex;gap:8px;width:100%;">
        <input id="nicknameInput" type="text" maxlength="12" id="nicknameInput" placeholder="ë‹‰ë„¤ì„ ì…ë ¥ (ìµœëŒ€ 12ì)"
          style="flex:1;height:38px;border:2px solid var(--border);border-radius:12px;padding:0 12px;font-family:'Nunito',sans-serif;font-size:14px;font-weight:800;color:var(--text);background:var(--bg);outline:none;">
        <button onclick="saveNickname()" style="height:38px;padding:0 14px;border:none;border-radius:12px;background:linear-gradient(135deg,#ff6eb4,#ff9fd3);color:white;font-family:'Nunito',sans-serif;font-size:13px;font-weight:900;cursor:pointer;" id="nSaveNickBtn">ì €ì¥</button>
      </div>
    </div>
    <div class="settings-row"><span class="settings-label" id="nNightMode">ğŸŒ™ ë‚˜ì´íŠ¸ ëª¨ë“œ</span><button class="toggle-btn" id="toggleNight" onclick="toggleSetting('night')"></button></div>
    <div class="settings-row"><span class="settings-label" id="nBgmLabel">ğŸµ ë°°ê²½ìŒì•…</span><button class="toggle-btn on" id="toggleBgm" onclick="toggleSetting('bgm')"></button></div>
    <div class="settings-row"><span class="settings-label" id="nSfxLabel">ğŸ”Š íš¨ê³¼ìŒ</span><button class="toggle-btn on" id="toggleSfx" onclick="toggleSetting('sfx')"></button></div>
    <div class="settings-row"><span class="settings-label" id="nVibLabel">ğŸ“³ ì§„ë™</span><button class="toggle-btn on" id="toggleVib" onclick="toggleSetting('vib')"></button></div>
    <div class="settings-section" id="nSkinLabel">ğŸ± ê³ ì–‘ì´ ìŠ¤í‚¨</div>
    <div class="skin-grid" id="skinGrid"></div>
    <div class="settings-section" id="nThemeLabel">ğŸ¨ ìƒ‰ìƒ í…Œë§ˆ</div>
    <div class="theme-grid" id="themeGrid"></div>
    <button class="settings-save" onclick="saveSettings()" id="nSaveAll">ì €ì¥ ğŸ’¾</button>
  </div>
</div>

<div class="screen" id="startScreen">
  <span class="logo-emoji">ğŸ±</span>
  <div class="logo-title" id="nLogoTitle">ëƒ¥10</div>
  <div class="logo-sub" id="nLogoSub">NUMBER PUZZLE</div>
  <div class="live-bar">
    <div style="display:flex;align-items:center;gap:8px"><div class="live-dot"></div><span class="live-txt" id="nLiveTxt">ì§€ê¸ˆ í”Œë ˆì´ ì¤‘</span></div>
    <span class="live-cnt" id="liveCnt">1ëª…</span>
  </div>
  <div class="daily-challenge" id="dailyChallenge">
    <span class="dc-badge" id="nDcBadge">ğŸ“… ì˜¤ëŠ˜ì˜ ë¯¸ì…˜</span>
    <span class="dc-text" id="dcText">ë¡œë”© ì¤‘...</span>
    <span class="dc-status" id="dcStatus">â¬œ</span>
  </div>
  <div class="rule-card">
    <div class="rule-item"><span class="ri">ğŸ‘†</span><span id="nRule1">ê³ ì–‘ì´ íƒ­ â†’ í•©ì´ <strong>10</strong>ì´ ë˜ë©´ ëƒ¥~âœ¨</span></div>
    <div class="rule-item"><span class="ri">â¬‡ï¸</span><span id="nRule2">ì‹œê°„ ì§€ë‚ ìˆ˜ë¡ ê³ ì–‘ì´ ìŸì•„ì§!</span></div>
    <div class="rule-item"><span class="ri">â±ï¸</span><span id="nRule3">60ì´ˆ ì•ˆì— ìµœëŒ€í•œ ë§ì´!</span></div>
  </div>
  <button class="btn-play" id="nStartBtn" onclick="firstStart()">ğŸ¾ START!</button>
  <div style="margin-top:6px;text-align:center;font-size:12px;font-weight:800;color:var(--dim);">
    ğŸ˜º <span id="startNickname"></span> Â· <span onclick="openSettings()" style="cursor:pointer;text-decoration:underline;" id="nChangeNick">ë‹‰ë„¤ì„ ë³€ê²½</span>
  </div>
  <div style="margin-top:8px;text-align:center;">
    <div style="margin-bottom:4px;">
      <span onclick="openPrivacy()" style="font-size:11px;font-weight:800;color:var(--dim);letter-spacing:1px;cursor:pointer;text-decoration:underline;" id="nPrivacyLink">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</span>
      &nbsp;Â·&nbsp;
      <span onclick="openTerms()" style="font-size:11px;font-weight:800;color:var(--dim);letter-spacing:1px;cursor:pointer;text-decoration:underline;" id="nTermsLink">ì´ìš©ì•½ê´€</span>
      &nbsp;Â·&nbsp;
      <a href="https://buymeacoffee.com/bang.a.can" target="_blank" style="font-size:11px;font-weight:800;color:#f7c948;text-decoration:none;" id="nCoffeeLink">ğŸ§‹ ì»¤í”¼ í•œ ì”</a>
    </div>
    <div>
      <a href="https://www.threads.net/@bang.a.can" target="_blank" style="font-size:11px;font-weight:800;color:var(--pink);text-decoration:none;"><span style="color:var(--dim);">by </span>@bang.a.can</a>
    </div>
  </div>
  <div style="margin-top:6px;width:100%;min-height:50px;">
    <ins class="adsbygoogle" style="display:block;width:100%;height:50px;" data-ad-client="ca-pub-8375396580965138" data-ad-slot="XXXXXXXXXX" data-ad-format="auto"></ins>
    <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script>
  </div>
</div>

<div class="screen hidden" id="gameScreen">
  <div class="top-hud">
    <div class="timer-ring-wrap">
      <svg width="72" height="72" viewBox="0 0 72 72">
        <circle class="tr-bg" cx="36" cy="36" r="30"/>
        <circle class="tr-fg" id="timerRing" cx="36" cy="36" r="30" stroke-dasharray="188.5" stroke-dashoffset="0"/>
      </svg>
      <div class="timer-n" id="timerNum">60</div>
    </div>
    <button class="restart-btn" onclick="confirmRestart()" title="ë‹¤ì‹œì‹œì‘">ğŸ”„</button>
    <div class="score-block">
      <div class="score-lbl">SCORE</div>
      <div class="score-val" id="scoreVal">0</div>
      <div class="combo-pill" id="comboPill">Ã—1</div>
    </div>
  </div>
  <div class="pvp-bar">
    <span class="pvp-name">ğŸ˜º</span>
    <span class="pvp-pts" id="pvpMyPts">0</span>
    <div class="pvp-track"><div class="pvp-me" id="pvpMyBar"></div><div class="pvp-opp" id="pvpOppBar"></div></div>
    <span class="pvp-pts" id="pvpOppPts">0</span>
    <span class="pvp-name" id="pvpOppName">ğŸ˜¼</span>
    <span class="pvp-status" id="pvpStatus">ğŸ’¨</span>
  </div>
  <div class="sum-bar" id="sumBar">
    <span class="sum-lbl" id="nSumLbl">í•©ê³„</span>
    <span class="sum-num" id="sumNum">â€”</span>
    <span class="sum-tip" id="sumTip">ê³ ì–‘ì´ë¥¼ ê³¨ë¼ë´ ğŸ±</span>
  </div>
  <div class="grid-wrap" id="gridWrap"><div class="grid" id="grid"></div></div>
</div>

<div class="screen hidden" id="resultScreen" onclick="handleResultTap(event)">
  <div class="res-emoji" id="resEmoji">ğŸ˜¸</div>
  <div class="res-top" id="nResTop">GAME OVER</div>
  <div class="res-grade" id="resGrade"></div>
  <div class="res-score" id="resScore">0</div>
  <div class="res-sub"><span id="nResSub1">íƒ€ì¼</span> <b id="resTiles">0</b><span id="nResSub2">ê°œ ì œê±°</span></div>
  <div class="res-rank" id="resRank"></div>
  <div class="res-best" id="resBest">BEST: <b>0</b></div>
  <div class="res-best-gap" id="resBestGap"></div>
  <div class="lb-card"><div class="lb-title" id="nLbTitle">ğŸ† ì˜¤ëŠ˜ì˜ TOP 5</div><div id="lbList" data-loading="ë¡œë”© ì¤‘...">ë¡œë”© ì¤‘...</div></div>
  <button class="btn-retry" id="nRetryBtn" onclick="instantRetry()">ğŸ”„ ë‹¤ì‹œí•˜ê¸°</button>
  <div class="retry-hint" id="nRetryHint">í™”ë©´ ì•„ë¬´ë°ë‚˜ íƒ­í•´ë„ ì‹œì‘í•´ìš” âš¡</div>
  <div class="share-section">
    <div class="share-label" id="nShareLabel">ê³µìœ í•˜ê¸°</div>
    <div class="share-grid">
      <button class="share-btn share-x" onclick="shareToX()" title="X(íŠ¸ìœ„í„°)">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="white"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-4.714-6.231-5.401 6.231H2.744l7.737-8.858L1.999 2.25H8.08l4.253 5.622 5.91-5.622zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
      </button>
      <button class="share-btn share-threads" onclick="shareToThreads()" title="Threads">
        <svg width="22" height="22" viewBox="0 0 192 192" fill="white"><path d="M141.537 88.988a66.667 66.667 0 0 0-2.518-1.143c-1.482-26.315-15.818-41.329-39.981-41.489h-.338c-14.425 0-26.435 6.163-33.803 17.38l13.052 8.953c5.519-8.38 14.197-10.171 20.753-10.171h.23c8.012.053 14.058 2.379 17.976 6.914 2.86 3.351 4.775 7.985 5.718 13.853-7.13-1.212-14.839-1.583-23.07-1.114-23.161 1.334-38.051 14.836-37.11 33.582.482 9.42 5.025 17.523 12.778 22.801 6.647 4.57 15.227 6.795 24.117 6.317 11.765-.631 20.996-5.145 27.438-13.415 4.893-6.282 7.985-14.409 9.345-24.603 5.607 3.384 9.758 7.953 12.03 13.526 3.86 9.365 4.083 24.762-7.974 36.82-10.63 10.626-23.42 15.231-42.685 15.365-21.32-.148-37.484-7.01-48.036-20.401C52.21 139.705 47.044 122.631 46.88 100c.164-22.631 5.33-39.705 15.36-50.768 10.552-13.39 26.716-20.252 48.036-20.4 21.467.149 37.957 7.038 49.056 20.486 5.445 6.625 9.524 14.97 12.146 24.853l15.329-4.078c-3.14-11.535-8.155-21.538-14.99-29.823C156.114 21.48 134.88 12.12 100.336 12L100 12l-.336.001C65.13 12.12 43.897 21.48 29.946 40.27 17.6 57.01 11.298 80.963 11.08 100v.02c.218 19.037 6.52 42.99 18.866 59.73C43.897 178.52 65.13 187.88 99.664 188l.336.001.336-.001c30.046-.2 51.26-8.051 66.772-24.512 17.176-18.207 16.556-40.935 10.938-54.923-4.006-9.711-11.69-17.672-21.509-22.577z"/></svg>
      </button>
      <button class="share-btn share-kakao" onclick="shareToKakao()" title="ì¹´ì¹´ì˜¤í†¡">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="#3C1E1E"><path d="M12 3C6.477 3 2 6.477 2 10.8c0 2.7 1.612 5.073 4.07 6.518L5.03 21l4.583-2.857A11.63 11.63 0 0 0 12 18.6c5.523 0 10-3.477 10-7.8S17.523 3 12 3z"/></svg>
      </button>
      <button class="share-btn share-link" onclick="copyLink()" title="ë§í¬ë³µì‚¬">ğŸ”—</button>
      <button class="share-btn share-native" onclick="shareScore()" title="ë”ë³´ê¸°">ğŸ“¤</button>
    </div>
    <div class="share-labels-row"><span id="nSL0">X</span><span id="nSL1">Threads</span><span id="nSL2">ì¹´í†¡</span><span id="nSL3">ë§í¬ë³µì‚¬</span><span id="nSL4">ë”ë³´ê¸°</span></div>
  </div>
  <div style="width:100%;min-height:50px;">
    <ins class="adsbygoogle" style="display:block;width:100%;height:50px;" data-ad-client="ca-pub-8375396580965138" data-ad-slot="XXXXXXXXXX" data-ad-format="auto"></ins>
    <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script>
  </div>
</div>

<div class="best-burst hidden" id="bestBurst"><div class="best-burst-inner" id="nBestBurst">ğŸ† ìµœê³ ì  ê²½ì‹ !</div></div>

<div class="tut-ov hidden" id="tutOv" onclick="closeTut()">
  <div class="tut-box">
    <div class="tut-emoji">ğŸ±</div>
    <div class="tut-title" id="nTutTitle">ì´ë ‡ê²Œ í•´ë´ìš”!</div>
    <div class="tut-step" id="nTutS1">1ï¸âƒ£ ìˆ«ì ê³ ì–‘ì´ë¥¼ <b>íƒ­</b>í•´ì„œ ì„ íƒ</div>
    <div class="tut-step" id="nTutS2">2ï¸âƒ£ ì„ íƒí•œ í•©ì´ <b>10</b>ì´ ë˜ë©´ ìë™ ì œê±°!</div>
    <div class="tut-step" id="nTutS3">3ï¸âƒ£ í•œë²ˆì— 3ê°œ ì´ìƒ â†’ <b>ë³´ë„ˆìŠ¤ ì ìˆ˜ ğŸ”¥</b></div>
    <div class="tut-step" id="nTutS4">4ï¸âƒ£ ì—°ì†ìœ¼ë¡œ ì„±ê³µí•˜ë©´ <b>ì½¤ë³´!</b></div>
    <button class="tut-btn" id="nTutBtn" onclick="closeTut()">ì‹œì‘í•˜ê¸° ğŸ¾</button>
  </div>
</div>

<div class="settings-modal hidden" id="termsModal" onclick="closeTermsBg(event)">
  <div class="settings-sheet" style="max-height:80vh;overflow-y:auto;">
    <div class="settings-title" id="nTermsTitle">ğŸ“„ ì´ìš©ì•½ê´€</div>
    <button class="settings-close" onclick="closeTerms()">âœ•</button>
    <div id="termsContent" style="font-size:12px;font-weight:700;color:var(--text);line-height:1.8;">
      <p style="margin-bottom:10px;color:var(--dim);">ì‹œí–‰ì¼: 2026ë…„ 1ì›” 1ì¼</p>
      <b>ì œ1ì¡° (ëª©ì )</b>
      <p style="margin:6px 0 12px;">ì´ ì•½ê´€ì€ ëƒ¥10(ì´í•˜ "ì„œë¹„ìŠ¤")ì´ ì œê³µí•˜ëŠ” ì›¹ ê²Œì„ ì„œë¹„ìŠ¤ì˜ ì´ìš© ì¡°ê±´ ë° ì ˆì°¨, ì´ìš©ìì™€ ì„œë¹„ìŠ¤ ê°„ì˜ ê¶Œë¦¬Â·ì˜ë¬´ ë° ì±…ì„ì‚¬í•­ì„ ê·œì •í•©ë‹ˆë‹¤.</p>
      <b>ì œ2ì¡° (ì´ìš© ìê²©)</b>
      <p style="margin:6px 0 12px;">ì„œë¹„ìŠ¤ëŠ” ë§Œ 13ì„¸ ì´ìƒ ëˆ„êµ¬ë‚˜ ë¬´ë£Œë¡œ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œ 13ì„¸ ë¯¸ë§Œì€ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ëŒ€í•œë¯¼êµ­ì˜ ê²½ìš° ë§Œ 14ì„¸ ë¯¸ë§Œì€ ë²•ì •ëŒ€ë¦¬ì¸ì˜ ë™ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.</p>
      <b>ì œ3ì¡° (ê¸ˆì§€ í–‰ìœ„)</b>
      <p style="margin:6px 0 12px;">- ë¦¬ë”ë³´ë“œ ì ìˆ˜ ì¡°ì‘Â·ì–´ë·°ì§•Â·í•µ ì‚¬ìš© ë“± ë¶€ì •í•œ ë°©ë²•ì˜ ì ìˆ˜ ì·¨ë“<br>- íƒ€ ì´ìš©ìì˜ ê²Œì„ ì§„í–‰ì„ ë°©í•´í•˜ëŠ” í–‰ìœ„<br>- ì„œë¹„ìŠ¤ì˜ ì •ìƒì ì¸ ìš´ì˜ì„ ë°©í•´í•˜ëŠ” í–‰ìœ„</p>
      <b>ì œ4ì¡° (ì„œë¹„ìŠ¤ ë³€ê²½ ë° ì¤‘ë‹¨)</b>
      <p style="margin:6px 0 12px;">ì„œë¹„ìŠ¤ëŠ” ìš´ì˜ ì •ì±…ì— ë”°ë¼ ì‚¬ì „ ê³ ì§€ ì—†ì´ ë³€ê²½ë˜ê±°ë‚˜ ì¤‘ë‹¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
      <b>ì œ5ì¡° (ì±…ì„ì˜ í•œê³„)</b>
      <p style="margin:6px 0 12px;">ì„œë¹„ìŠ¤ëŠ” ì´ìš©ìì˜ ê·€ì±… ì‚¬ìœ ë¡œ ë°œìƒí•œ ì†í•´ì— ëŒ€í•´ ì±…ì„ì„ ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¨, ì„œë¹„ìŠ¤ì˜ ê³ ì˜ ë˜ëŠ” ì¤‘ëŒ€í•œ ê³¼ì‹¤ë¡œ ì¸í•œ ì†í•´ì— ëŒ€í•´ì„œëŠ” ê´€ë ¨ ë²•ë ¹ì— ë”°ë¼ ì±…ì„ì„ ì§‘ë‹ˆë‹¤. ì´ìš©ìê°€ ì„œë¹„ìŠ¤ë¥¼ í†µí•´ ê¸°ëŒ€í•˜ëŠ” íŠ¹ì • ì´ìµì„ ë³´ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
      <b>ì œ6ì¡° (ì¤€ê±°ë²• ë° ë¶„ìŸí•´ê²°)</b>
      <p style="margin:6px 0 12px;">ì´ ì•½ê´€ì€ ëŒ€í•œë¯¼êµ­ ë²•ë¥ ì— ë”°ë¼ í•´ì„ë©ë‹ˆë‹¤. ëŒ€í•œë¯¼êµ­ ì´ìš©ìì™€ì˜ ë¶„ìŸì€ ì„œìš¸ì¤‘ì•™ì§€ë°©ë²•ì›ì„ ê´€í• ë¡œ í•©ë‹ˆë‹¤. í•´ì™¸ ì´ìš©ìì˜ ê²½ìš° í•´ë‹¹ êµ­ê°€ì˜ ê°•í–‰ë²•ê·œê°€ ìš°ì„  ì ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
      <b>ì œ7ì¡° (ë¬¸ì˜)</b>
      <p style="margin:6px 0 12px;">ğŸ“§ <a href="mailto:bang.a.can@gmail.com" style="color:var(--pink);">bang.a.can@gmail.com</a></p>
    </div>
    <button class="settings-save" onclick="closeTerms()" id="nTermsConfirm">í™•ì¸ âœ…</button>
  </div>
</div>

<div class="settings-modal hidden" id="privacyModal" onclick="closePrivacyBg(event)">
  <div class="settings-sheet" style="max-height:80vh;overflow-y:auto;">
    <div class="settings-title" id="nPrivacyTitle">ğŸ”’ ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</div>
    <button class="settings-close" onclick="closePrivacy()">âœ•</button>
    <div id="privacyContent" style="font-size:12px;font-weight:700;color:var(--text);line-height:1.8;">
      <p style="margin-bottom:10px;color:var(--dim);">ì‹œí–‰ì¼: 2026ë…„ 1ì›” 1ì¼</p>
      <b>1. ìˆ˜ì§‘í•˜ëŠ” ì •ë³´</b>
      <p style="margin:6px 0 12px;">ëƒ¥10ì€ ë‹¤ìŒ ì •ë³´ë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤:<br>- ê¸°ê¸° ê³ ìœ  ì‹ë³„ì (ëœë¤ ìƒì„±, ê°œì¸ íŠ¹ì • ë¶ˆê°€)<br>- ë‹‰ë„¤ì„ (ëœë¤ ìë™ ìƒì„± ë˜ëŠ” ì´ìš©ì ì…ë ¥)<br>- ê²Œì„ ì ìˆ˜ ë° í”Œë ˆì´ ì‹œê°„</p>
      <b>2. ìˆ˜ì§‘ ëª©ì </b>
      <p style="margin:6px 0 12px;">- ì‹¤ì‹œê°„ ë¦¬ë”ë³´ë“œ ìš´ì˜<br>- ë™ì ‘ì ìˆ˜ í‘œì‹œ<br>- ê²Œì„ ì„œë¹„ìŠ¤ í’ˆì§ˆ ê°œì„ </p>
      <b>3. ë³´ê´€ ê¸°ê°„</b>
      <p style="margin:6px 0 12px;">ì ìˆ˜ ë°ì´í„°ëŠ” ë‹¹ì¼ ê¸°ì¤€ìœ¼ë¡œ ê´€ë¦¬ë˜ë©°, ìµœëŒ€ 7ì¼ ì´ë‚´ì— ì‚­ì œë©ë‹ˆë‹¤. ê¸°ê¸° ì‹ë³„ìëŠ” ì´ìš©ìê°€ ì§ì ‘ ì´ˆê¸°í™”í•˜ê±°ë‚˜ ì‚­ì œ ìš”ì²­ ì‹œ ì¦‰ì‹œ íŒŒê¸°í•©ë‹ˆë‹¤.</p>
      <b>4. ì œ3ì ì œê³µ (í•´ì™¸ ì´ì „ í¬í•¨)</b>
      <p style="margin:6px 0 12px;">ìˆ˜ì§‘ëœ ì •ë³´ëŠ” Firebase(Google LLC, ë¯¸êµ­ ì†Œì¬)ì— ì €ì¥ë©ë‹ˆë‹¤. ì´ëŠ” ëŒ€í•œë¯¼êµ­ ì™¸ êµ­ê°€ë¡œì˜ ê°œì¸ì •ë³´ ì´ì „ì— í•´ë‹¹í•˜ë©°, Googleì˜ ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨ ë° í‘œì¤€ ê³„ì•½ ì¡°í•­(SCC)ì— ë”°ë¼ ë³´í˜¸ë©ë‹ˆë‹¤. í•´ë‹¹ ì •ë³´ëŠ” ì œ3ìì—ê²Œ íŒë§¤í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
      <b>5. ì´ìš©ì ê¶Œë¦¬</b>
      <p style="margin:6px 0 12px;">ì´ìš©ìëŠ” ì–¸ì œë“ ì§€ ë³¸ì¸ì˜ ë°ì´í„° ì—´ëŒÂ·ì‚­ì œÂ·ì²˜ë¦¬ ì •ì§€ë¥¼ ìš”ì²­í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„¤ì • í™”ë©´ì—ì„œ ì§ì ‘ ë°ì´í„° ì´ˆê¸°í™”ê°€ ê°€ëŠ¥í•˜ë©°, ì´ë©”ì¼ë¡œë„ ìš”ì²­í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš”ì²­ í›„ 30ì¼ ì´ë‚´ì— ì²˜ë¦¬ë©ë‹ˆë‹¤.</p>
      <b>6. ì•„ë™ ê°œì¸ì •ë³´</b>
      <p style="margin:6px 0 12px;">ì„œë¹„ìŠ¤ëŠ” ë§Œ 13ì„¸ ë¯¸ë§Œ ì•„ë™ì˜ ê°œì¸ì •ë³´ë¥¼ ì˜ë„ì ìœ¼ë¡œ ìˆ˜ì§‘í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë§Œ 13ì„¸ ë¯¸ë§Œì„ì´ í™•ì¸ë  ê²½ìš° ì¦‰ì‹œ í•´ë‹¹ ì •ë³´ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.</p>
      <b>7. ë¬¸ì˜</b>
      <p style="margin:6px 0 12px;">ğŸ“§ <a href="mailto:bang.a.can@gmail.com" style="color:var(--pink);">bang.a.can@gmail.com</a><br>ì²˜ë¦¬ ê¸°ê°„: ìš”ì²­ì¼ë¡œë¶€í„° 30ì¼ ì´ë‚´</p>
    </div>
    <button class="settings-save" onclick="closePrivacy()" id="nPrivacyConfirm">í™•ì¸ âœ…</button>
  </div>
</div>

<div class="restart-modal hidden" id="restartModal">
  <div class="restart-box">
    <div style="font-size:36px">ğŸ”„</div>
    <div style="font-size:17px;font-weight:900;color:var(--text);" id="nRestartTitle">ë‹¤ì‹œ ì‹œì‘í• ê¹Œìš”?</div>
    <div style="font-size:12px;font-weight:800;color:var(--dim);" id="nRestartSub">ì§€ê¸ˆ ì ìˆ˜ê°€ ì‚¬ë¼ì ¸ìš”!</div>
    <div style="display:flex;gap:10px;width:100%;margin-top:4px;">
      <button onclick="cancelRestart()" style="flex:1;height:44px;border:2px solid var(--border);border-radius:14px;background:white;font-family:'Nunito',sans-serif;font-size:15px;font-weight:900;color:var(--dim);cursor:pointer;" id="nCancelBtn">ì·¨ì†Œ</button>
      <button onclick="doRestart()" style="flex:1;height:44px;border:none;border-radius:14px;background:linear-gradient(135deg,#ff6eb4,#ff9fd3);font-family:'Nunito',sans-serif;font-size:15px;font-weight:900;color:white;cursor:pointer;box-shadow:0 4px 0 var(--pink-dark);" id="nRestartBtn">ë‹¤ì‹œì‹œì‘!</button>
    </div>
  </div>
</div>

<div class="cd-ov hidden" id="cdOv">
  <div class="cd-n" id="cdN">3</div>
  <div class="cd-sub" id="nCdSub">ê³ ì–‘ì´ë“¤ ì¶œë™ ì¤€ë¹„ ì¤‘...</div>
</div>
<div class="go-flash hidden" id="goFlash"><div class="go-txt">GO! ğŸ±</div></div>

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script type="module">
import{initializeApp}from"https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import{getDatabase,ref,set,get,push,onValue,onDisconnect,query,orderByChild,limitToLast}from"https://www.gstatic.com/firebasejs/12.9.0/firebase-database.js";
import{getAnalytics,logEvent}from"https://www.gstatic.com/firebasejs/12.9.0/firebase-analytics.js";
const cfg={apiKey:"AIzaSyD3XutJt1rNdunlkq_HNYZI28ZKxhCQN8U",authDomain:"nyang10-85344.firebaseapp.com",databaseURL:"https://nyang10-85344-default-rtdb.firebaseio.com",projectId:"nyang10-85344",storageBucket:"nyang10-85344.firebasestorage.app",messagingSenderId:"404004970168",appId:"1:404004970168:web:83f9ca635dabd038441e4d"};
const app=initializeApp(cfg);const db=getDatabase(app);const analytics=getAnalytics(app);
function getDeviceId(){let id=localStorage.getItem('n10_uid');if(!id){id='u_'+Date.now().toString(36)+Math.random().toString(36).slice(2,7);localStorage.setItem('n10_uid',id);}return id;}
function getDeviceName(){let n=localStorage.getItem('n10_name');if(!n){n='ëƒ¥ì§‘ì‚¬'+Math.floor(Math.random()*9000+1000);localStorage.setItem('n10_name',n);}return n;}
const DEVICE_ID=getDeviceId();
const DEVICE_NAME=getDeviceName();
function todayKey(){const d=new Date();return`${d.getFullYear()}-${d.getMonth()+1}-${d.getDate()}`;}
const tKey=todayKey();
const pRef=push(ref(db,'players'));
set(pRef,{t:Date.now()});
onDisconnect(pRef).remove();
onValue(ref(db,'players'),snap=>{const cnt=snap.exists()?Object.keys(snap.val()).length:1;const el=document.getElementById('liveCnt');if(el)el.textContent=Math.max(cnt,1)+(_T[_curLang]?.playerUnit||'ëª…');});
onValue(query(ref(db,`scores/${tKey}`),orderByChild('score'),limitToLast(1)),snap=>{if(!snap.exists())return;snap.forEach(c=>{window._todayBest=c.val().score;});},{onlyOnce:true});
window.fbSubmit=async s=>{
  const userRef=ref(db,`scores/${tKey}/${DEVICE_ID}`);
  const snap=await get(userRef);
  const prev=snap.exists()?snap.val().score:0;
  if(s>prev){const latestName=localStorage.getItem('n10_name')||DEVICE_NAME;await set(userRef,{name:latestName,score:s,t:Date.now()});}
};
let lbUnsub=null;
window.fbLeaderboard=myScore=>{
  if(lbUnsub){lbUnsub();lbUnsub=null;}
  const q=query(ref(db,`scores/${tKey}`),orderByChild('score'),limitToLast(20));
  lbUnsub=onValue(q,snap=>{
    if(!snap.exists()){document.getElementById('lbList').textContent=(_T[_curLang]||_T.ko).noRecord;return;}
    let arr=[];snap.forEach(c=>arr.push({...c.val(),uid:c.key}));
    arr.sort((a,b)=>b.score-a.score);
    const myEntry=arr.find(e=>e.uid===DEVICE_ID);
    if(!myEntry||myEntry.score<myScore){arr=arr.filter(e=>e.uid!==DEVICE_ID);arr.push({uid:DEVICE_ID,name:localStorage.getItem('n10_name')||DEVICE_NAME,score:myScore});arr.sort((a,b)=>b.score-a.score);}
    const top5=arr.slice(0,5);
    document.getElementById('lbList').innerHTML=top5.map((e,i)=>{
      const isMe=e.uid===DEVICE_ID;
      const g=[...GRADES].reverse().find(g=>e.score>=g.min)||GRADES[0];
      const lt2=(_T[_curLang]||_T.ko);return`<div class="lb-row ${isMe?'me':''}"><span class="lb-rank">${['ğŸ¥‡','ğŸ¥ˆ','ğŸ¥‰','4ï¸âƒ£','5ï¸âƒ£'][i]}</span><span class="lb-name">${isMe?'ğŸ˜º '+lt2.meLabel+' ('+e.name+')':e.name}</span><span style="font-size:10px;color:var(--dim);margin-right:4px;">${g.e}${gradeTitle(g)}</span><span class="lb-pts">${e.score}${lt2.scoreSuffix}</span></div>`;
    }).join('');
    const myIdx=arr.findIndex(e=>e.uid===DEVICE_ID);
    const rankEl=document.getElementById('resRank');
    if(rankEl&&myIdx>=0){const pct=Math.round(((arr.length-myIdx)/arr.length)*100);const lt3=(_T[_curLang]||_T.ko);rankEl.textContent=lt3.rankTxt.replace('{total}',arr.length).replace('{pct}',pct).replace('{rank}',myIdx+1);}
  });
};
window.stopLbListen=()=>{if(lbUnsub){lbUnsub();lbUnsub=null;}};
window.analyticsLog=(name,params)=>{try{logEvent(analytics,name,params||{});}catch(e){}};
</script>

<script>
const BOT_NAMES={ko:['ê³ ì–‘ì´ì¡°ì•„','ìƒˆë²½ì„¸ì‹œ','ê°ìì¹©','ë°¥ë¨¹ëŠ”ì¤‘','ì¡¸ë ¤ì£½ê² ë‹¤','ëƒ¥ëƒ¥ì´ì§‘ì‚¬','í‡´ê·¼í•˜ê³ ì‹¶ë‹¤','ë°°ê³ íŒŒ','ì‹¬ì‹¬í•œê³ ì–‘ì´','ë‚®ì ìëŠ”ì¤‘','ì¹˜í‚¨ë¨¹ì','ë²„ë¸”í‹°','íƒ•í›„ë£¨','ì•¼ê·¼ì¤‘','ì¬íƒê·¼ë¬´','ê³ ì–‘ì´ì„¸ë§ˆë¦¬','í„¸ë­‰ì¹˜','ì¹˜ì¦ˆëƒ¥','ê³ ë“±ì–´ëƒ¥','ìº£íƒ€ì›Œ','ì¸„ë¥´ì¡°ì•„','ìº£ë‹™ì¤‘ë…','ëŒ€í•™ìƒì§‘ì‚¬','ë‹¬ë°¤ëƒ¥ì´','ë³„ë³´ëŠ”ì§‘ì‚¬','ë‘ë¶€ëƒ¥','ë©ë•Œë¦¬ëŠ”ì¤‘','ë„·í”Œì§‘ì‚¬','ê²Œì„í•˜ëŠ”ì§‘ì‚¬','ì†Œì‹¬í•œì§‘ì‚¬','í—¬ìŠ¤í•˜ëŠ”ëƒ¥ì´','ì±…ì½ëŠ”ì§‘ì‚¬','ìš”ë¦¬í•˜ëŠ”ì§‘ì‚¬'],en:['CatLover99','NightOwl','PotatoChip','Sleepy2024','NyanButler','CouchCat','HungryHuman','BoredKitty','CatDad','CatMom','MondayHater','FridayVibes','NetflixCat','GamingButler','CatPhotog','JustChilling','QuietKitty','SnackAttack','GymCat','BookwormCat','CookingButler','StargazingCat','NightWalker','CheeseCat','TunaCan','CatnipAddict','WFHButler','WeekendCat','CoffeeFirst','NapKing','LazyButler','ActiveKitty','MusicCat'],ja:['ã­ã“å¥½ã','å¤œæ›´ã‹ã—','ãƒãƒ†ãƒ','çœ ã„åŸ·äº‹','ã«ã‚ƒã‚“åŸ·äº‹','ã‚½ãƒ•ã‚¡ã­ã“','ãŠè…¹ã™ã„ãŸ','æš‡ãªã­ã“','ã­ã“ãƒ‘ãƒ‘','ã­ã“ãƒãƒ','æœˆæ›œå«Œã„','é‡‘æ›œä¸‡æ­³','ãƒãƒˆãƒ•ãƒªã­ã“','ã‚²ãƒ¼ãƒ åŸ·äº‹','ã­ã“ã‚«ãƒ¡ãƒ©ãƒãƒ³','ã¾ã£ãŸã‚Šä¸­','é™ã‹ãªã­ã“','å¤œé£Ÿã‚¿ã‚¤ãƒ ','ç­‹ãƒˆãƒ¬ã­ã“','èª­æ›¸ã­ã“','æ–™ç†åŸ·äº‹','æ˜Ÿè¦‹ã‚‹ã­ã“','å¤œæ•£æ­©','ãƒãƒ¼ã‚ºã­ã“','ãƒ„ãƒŠç¼¶','ã¾ãŸãŸã³ä¸­æ¯’','åœ¨å®…å‹¤å‹™','é€±æœ«åŸ·äº‹','ã‚³ãƒ¼ãƒ’ãƒ¼å…ˆç”Ÿ','æ˜¼å¯ã®ç‹','æ€ æƒ°åŸ·äº‹','æ´»ç™ºã«ã‚ƒã‚“','éŸ³æ¥½ã­ã“']};
function randBotName(){const names=BOT_NAMES[_curLang]||BOT_NAMES.ko;return names[Math.floor(Math.random()*names.length)];}
function randBotTarget(){const u1=Math.random(),u2=Math.random();const z=Math.sqrt(-2*Math.log(u1))*Math.cos(2*Math.PI*u2);return Math.max(60,Math.min(600,Math.round(250+z*120)));}

let audioCtx=null,sfxMuted=false,tickInterval=null;
function getCtx(){if(!audioCtx)audioCtx=new(window.AudioContext||window.webkitAudioContext)();if(audioCtx.state==='suspended')audioCtx.resume();return audioCtx;}
function playTone(freq,type='sine',duration=0.12,vol=0.3,delay=0){if(sfxMuted)return;try{const ctx=getCtx();const osc=ctx.createOscillator();const gain=ctx.createGain();osc.connect(gain);gain.connect(ctx.destination);osc.type=type;osc.frequency.setValueAtTime(freq,ctx.currentTime+delay);gain.gain.setValueAtTime(vol,ctx.currentTime+delay);gain.gain.exponentialRampToValueAtTime(0.001,ctx.currentTime+delay+duration);osc.start(ctx.currentTime+delay);osc.stop(ctx.currentTime+delay+duration+0.01);}catch(e){}}
function playChord(freqs,type='sine',duration=0.15,vol=0.25){freqs.forEach((f,i)=>playTone(f,type,duration,vol,i*0.03));}
function sndSelect(num){playTone(300+num*40,'triangle',0.08,0.2);}
function sndSuccess(combo){if(combo>=5){[523,659,784,1047,1319].forEach((f,i)=>playTone(f,'sine',0.18,0.3,i*0.05));}else if(combo>=3){playChord([523,659,784],'sine',0.2,0.3);playTone(1047,'sine',0.25,0.25,0.1);}else{playTone(523,'sine',0.1,0.25);playTone(784,'sine',0.15,0.3,0.08);}}
function sndFail(){playTone(200,'sawtooth',0.15,0.3);playTone(150,'sawtooth',0.2,0.25,0.1);}
function startTickSound(){clearInterval(tickInterval);tickInterval=setInterval(()=>{if(!sfxMuted)playTone(880,'square',0.05,0.15);},500);}
function stopTickSound(){clearInterval(tickInterval);}
function sndStart(){[330,440,523,659].forEach((f,i)=>playTone(f,'sine',0.12,0.25,i*0.06));}
function sndGameOver(){stopTickSound();[523,440,349,262].forEach((f,i)=>playTone(f,'triangle',0.2,0.3,i*0.1));}

let bgmRunning=false,bgmNextTime=0,bgmStep=0,bgmRafId=null;
const BGM_NOTES=[523,659,784,659,523,523,659,784,880,784,659,523,440,523,659,523];
function scheduleBGM(){
  if(!bgmRunning||!settings.bgm)return;
  const ctx=getCtx();
  while(bgmNextTime<ctx.currentTime+0.3){try{const osc=ctx.createOscillator();const gain=ctx.createGain();osc.connect(gain);gain.connect(ctx.destination);osc.type='sine';osc.frequency.value=BGM_NOTES[bgmStep%BGM_NOTES.length];gain.gain.setValueAtTime(0.06,bgmNextTime);gain.gain.exponentialRampToValueAtTime(0.001,bgmNextTime+0.18);osc.start(bgmNextTime);osc.stop(bgmNextTime+0.19);}catch(e){}bgmNextTime+=0.22;bgmStep++;}
  bgmRafId=requestAnimationFrame(scheduleBGM);
}
function startBGM(){if(bgmRunning||!settings.bgm)return;bgmRunning=true;try{bgmNextTime=getCtx().currentTime+0.05;}catch(e){return;}scheduleBGM();}
function stopBGM(){bgmRunning=false;if(bgmRafId){cancelAnimationFrame(bgmRafId);bgmRafId=null;}}
function toggleMute(){settings.sfx=!settings.sfx;sfxMuted=!settings.sfx;document.getElementById('muteBtn').textContent=sfxMuted?'ğŸ”‡':'ğŸ”Š';if(!sfxMuted)playTone(880,'sine',0.1,0.2);saveSettingsData();}

const CAT_SKINS=[
  {id:'classic',emojis:['','ğŸ˜º','ğŸ˜¸','ğŸ˜»','ğŸ±','ğŸ˜¹','ğŸ™€','ğŸ˜¿','ğŸ˜¾','ğŸˆ'],color:'#ffadad',label:'ê¸°ë³¸'},
  {id:'fancy',  emojis:['','ğŸ±','ğŸ¦','ğŸ¯','ğŸ»','ğŸ¼','ğŸ¨','ğŸ¦Š','ğŸº','ğŸ¸'],color:'#b5ead7',label:'ë™ë¬¼'},
  {id:'star',   emojis:['','â­','ğŸŒŸ','ğŸ’«','âœ¨','ğŸŒ™','â˜€ï¸','ğŸŒˆ','ğŸ€','ğŸ¯'],color:'#a8e6f0',label:'ë³„ë¹›'},
  {id:'food',   emojis:['','ğŸ','ğŸŠ','ğŸ‹','ğŸ‡','ğŸ“','ğŸ«','ğŸ‘','ğŸ’','ğŸ¥'],color:'#fdffb6',label:'ê³¼ì¼'},
  {id:'pure',   emojis:['','','','','','','','','',''],color:'#c5b8ff',label:'ìˆ«ìë§Œ',pure:true},
];
const COLOR_THEMES=[
  {id:'pink',  bg:'#fef6ff',pink:'#ff6eb4',pinkDark:'#d94d96',border:'#f0d4f0',label:'ğŸŒ¸'},
  {id:'mint',  bg:'#f0fffd',pink:'#4ecdc4',pinkDark:'#2ba89f',border:'#b5f0ec',label:'ğŸŒ¿'},
  {id:'sky',   bg:'#f0f8ff',pink:'#4a90d9',pinkDark:'#2c6db5',border:'#b8d9f5',label:'ğŸ©µ'},
  {id:'purple',bg:'#f5f0ff',pink:'#8b5cf6',pinkDark:'#6d28d9',border:'#d8c8ff',label:'ğŸ’œ'},
  {id:'peach', bg:'#fff8f0',pink:'#ff8c42',pinkDark:'#d96520',border:'#ffd5b0',label:'ğŸ‘'},
];
let settings={bgm:true,sfx:true,vib:true,night:false,skin:'classic',theme:'pink'};
function loadSettingsData(){try{const s=JSON.parse(localStorage.getItem('n10_settings')||'{}');Object.assign(settings,s);}catch(e){}applyTheme(settings.theme);applyNight(settings.night);sfxMuted=!settings.sfx;document.getElementById('muteBtn').textContent=sfxMuted?'ğŸ”‡':'ğŸ”Š';updateStartNickname();}
function saveSettingsData(){localStorage.setItem('n10_settings',JSON.stringify(settings));}
function applyTheme(id){const t=COLOR_THEMES.find(t=>t.id===id)||COLOR_THEMES[0];const r=document.documentElement.style;if(!settings.night){r.setProperty('--bg',t.bg);r.setProperty('--border',t.border);}r.setProperty('--pink',t.pink);r.setProperty('--pink-dark',t.pinkDark);}
function applyNight(on){document.body.classList.toggle('night',on);if(!on)applyTheme(settings.theme);else{document.documentElement.style.removeProperty('--bg');document.documentElement.style.removeProperty('--border');}}
function openSettings(){
  ['bgm','sfx','vib','night'].forEach(k=>{const el=document.getElementById('toggle'+k.charAt(0).toUpperCase()+k.slice(1));if(el)el.className='toggle-btn'+(settings[k]?' on':'');});
  document.getElementById('skinGrid').innerHTML=CAT_SKINS.map(s=>{const locked=!isSkinUnlocked(s.id);const hint=locked?(SKIN_UNLOCK[s.id]?.hint||''):'';return`<div class="skin-opt${settings.skin===s.id?' active':''}${locked?' locked':''}" onclick="${locked?`showToast('ğŸ”’ ${hint}');return;`:``}selectSkin('${s.id}')" style="background:${s.color}" data-skin="${s.id}">${s.pure?'':'<div class="s-emoji">'+s.emojis[1]+'</div>'}<div class="s-num" style="${s.pure?'font-size:26px':''}">3</div></div>`;}).join('');
  document.getElementById('themeGrid').innerHTML=COLOR_THEMES.map(t=>`<div class="theme-opt${settings.theme===t.id?' active':''}" onclick="selectTheme('${t.id}')" style="background:${t.bg};border-color:${settings.theme===t.id?t.pink:'#f0d4f0'}" data-theme="${t.id}"><span style="font-size:20px">${t.label}</span></div>`).join('');
  document.getElementById('settingsModal').classList.remove('hidden');
  const ni=document.getElementById('nicknameInput');if(ni)ni.value=localStorage.getItem('n10_name')||'';
}
function closeSettings(){document.getElementById('settingsModal').classList.add('hidden');}
function closeSettingsBg(e){if(e.target===document.getElementById('settingsModal'))closeSettings();}
function toggleSetting(key){settings[key]=!settings[key];const btn=document.getElementById('toggle'+key.charAt(0).toUpperCase()+key.slice(1));btn.className='toggle-btn'+(settings[key]?' on':'');if(key==='sfx'){sfxMuted=!settings.sfx;document.getElementById('muteBtn').textContent=sfxMuted?'ğŸ”‡':'ğŸ”Š';if(!sfxMuted)playTone(880,'sine',0.1,0.2);}if(key==='bgm'){settings.bgm?startBGM():stopBGM();}if(key==='night'){applyNight(settings.night);}}
function selectSkin(id){settings.skin=id;document.querySelectorAll('.skin-opt').forEach(el=>el.classList.toggle('active',el.dataset.skin===id));const skin=CAT_SKINS.find(s=>s.id===id);if(skin)window._curSkin=skin;}
function selectTheme(id){settings.theme=id;document.querySelectorAll('.theme-opt').forEach(el=>{const t=COLOR_THEMES.find(t=>t.id===el.dataset.theme);el.classList.toggle('active',el.dataset.theme===id);if(t)el.style.borderColor=el.dataset.theme===id?t.pink:'#f0d4f0';});applyTheme(id);}
function saveNickname(){const input=document.getElementById('nicknameInput');const val=input.value.trim();const lt=_T[_curLang]||_T.ko;if(!val){showToast(lt.nickEmpty);return;}localStorage.setItem('n10_name',val);updateStartNickname();showToast(lt.nickSaved+val);if(settings.sfx)playTone(660,'sine',0.1,0.25);}
function updateStartNickname(){const el=document.getElementById('startNickname');if(el)el.textContent=localStorage.getItem('n10_name')||'ëƒ¥ì§‘ì‚¬';}
function saveSettings(){saveSettingsData();const skin=CAT_SKINS.find(s=>s.id===settings.skin)||CAT_SKINS[0];window._curSkin=skin;closeSettings();if(settings.sfx)playTone(660,'sine',0.1,0.25);}
function vibrate(pattern){if(settings.vib&&navigator.vibrate)navigator.vibrate(pattern);}

const COLS=4,ROWS=5,TARGET=10,DURATION=60,CIRC=188.5;
const CAT_EMOJIS=['','ğŸ˜º','ğŸ˜¸','ğŸ˜»','ğŸ±','ğŸ˜¹','ğŸ™€','ğŸ˜¿','ğŸ˜¾','ğŸˆ'];
function getCatEmoji(v){const skin=window._curSkin||{emojis:CAT_EMOJIS};if(skin.pure)return '';return skin.emojis[v]||CAT_EMOJIS[v]||'ğŸ±';}
const W={easy:[0,4,5,10,11,13,11,8,4,2],mid:[0,4,5,9,11,12,10,6,3,2],hard:[0,3,4,8,10,12,9,6,4,2]};
const GRADES=[{min:0,e:'ğŸ˜µ',gi:0,bg:'#e8f4ff',c:'#4a90c4'},{min:150,e:'ğŸ« ',gi:1,bg:'#fff3e8',c:'#d07020'},{min:350,e:'ğŸ˜¤',gi:2,bg:'#ffe8f5',c:'#d94d96'},{min:600,e:'ğŸ¤©',gi:3,bg:'#f3e8ff',c:'#7c3aed'},{min:900,e:'ğŸ«¡',gi:4,bg:'#fff8d6',c:'#b08000'},{min:2000,e:'ğŸ‘¼',gi:5,bg:'#ffe0f0',c:'#c0006a'}];
function gradeTitle(g){return(_T[_curLang]||_T.ko).grades[g.gi]||'';}
window.GRADES=GRADES;
const SMS=[{v:50,m:'ğŸ‰ 50ì !'},{v:100,m:'ğŸ’¥ 100ì !!'},{v:200,m:'ğŸ‘‘ 200ì  ì „ì„¤'}];
const CMS=[{v:3,m:'ğŸ”¥ ì½¤ë³´ 3!'},{v:5,m:'ğŸ’£ ì½¤ë³´ 5!!'},{v:10,m:'ğŸŒŸ ì½¤ë³´ 10!!!'}];

let board=[],sel=[],score=0,cleared=0,combo=0,timeLeft=DURATION,running=false,ticker=null,cTimer=null,pTimer=null,oppTimer=null,best=+localStorage.getItem('n10best')||0,tid=0,dSMS=new Set(),dCMS=new Set(),oppScore=0,dc3hits=0,pressureActive=false;

function wrand(w){let t=w.reduce((a,b)=>a+b,0),r=Math.random()*t;for(let i=1;i<=9;i++){r-=w[i];if(r<=0)return i;}return 5;}
function phase(){if(timeLeft>40)return'easy';if(timeLeft>15)return'mid';return'hard';}
function mkTile(forceEasy=false){return{v:wrand(forceEasy?W.easy:W[phase()]),id:tid++};}
function initBoard(){
  board=[];
  const pairPool=[[1,9],[2,8],[3,7],[4,6],[5,5],[1,9],[2,8],[3,7],[4,6],[5,5],[1,9],[2,8]];
  for(let i=pairPool.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[pairPool[i],pairPool[j]]=[pairPool[j],pairPool[i]];}
  const chosen=pairPool.slice(0,8);let flat=[];chosen.forEach(p=>{flat.push(p[0],p[1]);});
  for(let i=flat.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[flat[i],flat[j]]=[flat[j],flat[i]];}
  let pi=0;
  for(let r=0;r<ROWS;r++){board[r]=[];for(let c=0;c<COLS;c++){if(pi<flat.length){board[r][c]={v:flat[pi++],id:tid++};}else{board[r][c]=mkTile(true);}}}
}
function getCell(r,c){return document.getElementById('gridWrap').querySelector(`.grid-cell[data-pos="${r}-${c}"]`);}
function makeTileInner(t){const emoji=getCatEmoji(t.v);const isPure=window._curSkin&&window._curSkin.pure;return`<div class="ti">${emoji&&!isPure?`<div class="t-emoji">${emoji}</div>`:''}<span class="tnum"${isPure?' style="font-size:clamp(30px,9vw,42px)"':''}>${t.v}</span></div>`;}
function buildGrid(){
  const g=document.getElementById('grid');g.innerHTML='';
  const newG=g.cloneNode(false);g.parentNode.replaceChild(newG,g);
  newG.addEventListener('click',e=>{const cell=e.target.closest('.grid-cell');if(!cell)return;const pos=cell.dataset.pos.split('-');onTap(+pos[0],+pos[1]);});
  for(let r=0;r<ROWS;r++)for(let c=0;c<COLS;c++){const cell=document.createElement('div');cell.className='grid-cell';cell.dataset.pos=`${r}-${c}`;const t=board[r][c];if(t){const el=document.createElement('div');el.className=`tile t${t.v}`;el.dataset.id=t.id;el.innerHTML=makeTileInner(t);cell.appendChild(el);}newG.appendChild(cell);}
}
function renderSelection(){for(let r=0;r<ROWS;r++)for(let c=0;c<COLS;c++){const cell=getCell(r,c);if(!cell)continue;const tile=cell.querySelector('.tile');if(!tile)continue;tile.classList.toggle('selected',sel.some(s=>s.r===r&&s.c===c));}}
function animateRemoveAndFill(rem){
  const cellH=document.querySelector('.grid-cell')?.offsetHeight||62;
  rem.forEach(({r,c})=>{const tile=getCell(r,c)?.querySelector('.tile');if(tile){tile.style.transition='transform .1s ease,opacity .1s ease';tile.style.transform='scale(0)';tile.style.opacity='0';}});
  setTimeout(()=>{
    rem.forEach(({r,c})=>{board[r][c]=null;getCell(r,c).innerHTML='';});
    for(let c=0;c<COLS;c++){
      let gaps=0;
      for(let r=ROWS-1;r>=0;r--){if(!board[r][c]){gaps++;}else if(gaps>0){const fromCell=getCell(r,c);const toCell=getCell(r+gaps,c);const tile=fromCell.querySelector('.tile');if(tile&&toCell){const dist=gaps*(cellH+4);const movedTile=tile.cloneNode(true);movedTile.style.transition='none';movedTile.style.transform=`translateY(-${dist}px)`;fromCell.removeChild(tile);toCell.appendChild(movedTile);requestAnimationFrame(()=>{movedTile.style.transition='transform .15s cubic-bezier(.2,1.2,.5,1)';movedTile.style.transform='translateY(0)';});board[r+gaps][c]=board[r][c];board[r][c]=null;}}}
      for(let r=0;r<ROWS;r++){if(!board[r][c]){board[r][c]=mkTile();const cell=getCell(r,c);const el=document.createElement('div');el.className=`tile t${board[r][c].v}`;el.dataset.id=board[r][c].id;el.innerHTML=makeTileInner(board[r][c]);el.style.transform='translateY(-80px)';el.style.opacity='0';el.style.transition='none';cell.appendChild(el);requestAnimationFrame(()=>{el.style.transition=`transform .18s cubic-bezier(.2,1.3,.5,1),opacity .12s ease`;el.style.transform='translateY(0)';el.style.opacity='1';});}}
    }
    updateScore();updateCombo();updateSumBar(0);updatePVP();
  },110);
}
function render(){buildGrid();}
function onTap(r,c){
  if(!running)return;
  const idx=sel.findIndex(s=>s.r===r&&s.c===c);if(idx>=0)sel.splice(idx,1);else sel.push({r,c});
  const sum=getSum();sndSelect(board[r][c]?board[r][c].v:5);
  if(sum>TARGET){if(phase()==='hard'){timeLeft=Math.max(0,timeLeft-2);updateTimer();showFx('â°-2ì´ˆ',mx(r,c),my(r,c),'#ff4f4f',22);}vibrate([80,30,80]);sndFail();sel=[];const bar=document.getElementById('sumBar');bar.classList.add('shake');setTimeout(()=>bar.classList.remove('shake'),300);showFx('ì•¼ì˜¹?!',window.innerWidth/2,window.innerHeight*.4,'#ff4f4f',32);flash('ng');document.body.classList.add('shakebody');setTimeout(()=>document.body.classList.remove('shakebody'),450);updateSumBar(0);renderSelection();return;}
  updateSumBar(sum);renderSelection();
  if(sum===TARGET&&sel.length>=2)doRemove();
}
function getSum(){return sel.reduce((s,{r,c})=>s+(board[r][c]?board[r][c].v:0),0);}
function showComboBurst(combo,cnt){const el=document.createElement('div');el.className='combo-burst';let txt,color,size;if(cnt>=4){txt='ğŸ’¥\n4ê°œ!';color='#ff6eb4';size=52;}else if(cnt===3){txt='âš¡\n3ê°œ!';color='#4ecdc4';size=46;}else if(combo>=5){txt=`ğŸŒŸ\nCOMBO\nÃ—${combo}`;color='#c5b8ff';size=44;}else if(combo>=3){txt=`ğŸ”¥\nCOMBO\nÃ—${combo}`;color='#ff9fd3';size=40;}else return;el.style.cssText=`font-size:${size}px;color:${color};text-shadow:0 4px 16px rgba(0,0,0,.2);line-height:1.1;white-space:pre;`;el.textContent=txt;document.body.appendChild(el);setTimeout(()=>el.remove(),560);}
function doRemove(){
  const rem=[...sel];const cnt=rem.length;
  combo++;clearTimeout(cTimer);cTimer=setTimeout(()=>{combo=0;updateCombo();},4500);
  if(combo===3)dc3hits++;
  const cntMult=cnt>=4?2.5:cnt===3?1.5:1;const comboMult=combo>=3?1.5:1;const totalMult=cntMult*comboMult;const base=cnt*10;const earned=Math.round(base*totalMult);score+=earned;cleared+=cnt;
  let fxTxt,fxColor,fxSize;if(cnt>=4){fxTxt='ğŸ’¥ 4ê°œ!+'+earned;fxColor='#ff6eb4';fxSize=30;}else if(cnt===3){fxTxt='âš¡ 3ê°œ!+'+earned;fxColor='#4ecdc4';fxSize=28;}else if(combo>=5){fxTxt='ğŸŒŸ COMBO!!';fxColor='#c5b8ff';fxSize=32;}else if(combo>=3){fxTxt='ğŸ”¥ COMBO!';fxColor='#c5b8ff';fxSize=28;}else{fxTxt='ëƒ¥~âœ¨';fxColor='var(--pink)';fxSize=26;}
  showFx(fxTxt,mx(rem[0].r,rem[0].c),my(rem[0].r,rem[0].c),fxColor,fxSize);showComboBurst(combo,cnt);if(cnt>=3)showFx(`+${earned}ì `,mx(rem[0].r,rem[0].c),my(rem[0].r,rem[0].c)+36,'#ffcc00',20);
  flash('ok');const gw=document.getElementById('gridWrap');gw.classList.add('success-zoom');setTimeout(()=>gw.classList.remove('success-zoom'),350);
  if(cnt>=3||combo>=3){const cf=document.createElement('div');cf.className=(cnt>=5||combo>=5)?'combo5-flash':'combo-flash';if(cf.className==='combo-flash')cf.style.background=cnt>=3?'rgba(78,205,196,.25)':'rgba(255,110,180,.2)';document.body.appendChild(cf);setTimeout(()=>cf.remove(),600);}
  sndSuccess(Math.max(combo,cnt>=3?3:0));vibrate(cnt>=3?[30,15,30,15,60]:combo>=3?[40,20,40,20,60]:40);sel=[];checkMS();animateRemoveAndFill(rem);
}
function startPressure(){
  if(pressureActive)return;
  pressureActive=true;
  clearTimeout(pTimer);const p=phase();if(p==='easy'){pressureActive=false;return;}
  const fire=()=>{clearTimeout(pTimer);if(!running){pressureActive=false;return;}pushRow();pTimer=setTimeout(fire,{mid:4000,hard:2500}[phase()]||2500);};
  pTimer=setTimeout(fire,{mid:4000,hard:2500}[p]||4000);
}
function pushRow(){for(let r=ROWS-1;r>0;r--)board[r]=[...board[r-1]];board[0]=[];for(let c=0;c<COLS;c++)board[0][c]=mkTile();render();}
function startOpp(){clearInterval(oppTimer);oppScore=0;const target=window._todayBest||randBotTarget();const botName=randBotName();const oppNameEl=document.getElementById('pvpOppName');if(oppNameEl)oppNameEl.textContent=botName;oppTimer=setInterval(()=>{if(!running){clearInterval(oppTimer);return;}const elapsed=DURATION-timeLeft;oppScore=Math.floor((target/DURATION)*elapsed*(0.85+Math.random()*.3));updatePVP();},1000);}
function updatePVP(){const max=300;document.getElementById('pvpMyBar').style.width=Math.min(100,score/max*100)+'%';document.getElementById('pvpOppBar').style.width=Math.min(100,oppScore/max*100)+'%';document.getElementById('pvpMyPts').textContent=score;document.getElementById('pvpOppPts').textContent=oppScore;const ahead=score>oppScore;document.getElementById('pvpStatus').textContent=ahead?'ğŸ”¥':'ğŸ’¨';document.getElementById('pvpStatus').style.color=ahead?'var(--mint)':'#ff9040';}
function checkMS(){SMS.forEach(m=>{if(score>=m.v&&!dSMS.has(m.v)){dSMS.add(m.v);showMS(m.m);}});CMS.forEach(m=>{if(combo>=m.v&&!dCMS.has(m.v)){dCMS.add(m.v);showMS(m.m);}});}
function showMS(msg){const el=document.createElement('div');el.className='milestone';el.textContent=msg;document.body.appendChild(el);setTimeout(()=>el.remove(),2000);}
function updateScore(){const el=document.getElementById('scoreVal');el.textContent=score;el.classList.remove('pop');void el.offsetWidth;el.classList.add('pop');}
function updateCombo(){const el=document.getElementById('comboPill');if(combo>=3){el.textContent='Ã—1.5 ğŸ”¥';el.className='combo-pill on';}else if(combo>=2){el.textContent='ğŸ”¥ ì½¤ë³´!';el.className='combo-pill on';}else{el.textContent='Ã—1';el.className='combo-pill';}}
function updateSumBar(sum){const bar=document.getElementById('sumBar'),num=document.getElementById('sumNum'),tip=document.getElementById('sumTip');bar.className='sum-bar';const cnt=sel.length;const lt=_T[_curLang]||_T.ko;if(!sum||!cnt){num.textContent='â€”';num.className='sum-num';tip.textContent=lt.sumPick;tip.className='sum-tip';}else if(sum===TARGET){num.textContent=sum;num.className='sum-num exact';const bonus=cnt>=4?'Ã—2.5 ğŸ’¥':cnt===3?'Ã—1.5 âš¡':'';tip.textContent=lt.sumDone+bonus;tip.className='sum-tip exact';bar.classList.add('exact');}else if(TARGET-sum<=2){num.textContent=sum;num.className='sum-num close';tip.textContent=`${TARGET-sum} ${lt.sumMore1}`;tip.className='sum-tip';bar.classList.add('close-glow');}else{num.textContent=sum;num.className='sum-num';tip.textContent=cnt>=3?`${TARGET-sum} ${lt.sumMore2}`:`${TARGET-sum} ${lt.sumMore1}`;tip.className='sum-tip';}}
function updateTimer(){const ring=document.getElementById('timerRing'),num=document.getElementById('timerNum'),border=document.getElementById('panicBorder');ring.style.strokeDashoffset=CIRC*(1-timeLeft/DURATION);if(timeLeft<=10){ring.style.stroke='#ff4f4f';num.style.color='#ff4f4f';border.className='panic-border on';if(timeLeft===10)startTickSound();}else if(timeLeft<=20){ring.style.stroke='#ff9040';num.style.color='#ff9040';border.className='panic-border';}else{ring.style.stroke='var(--pink)';num.style.color='var(--text)';border.className='panic-border';}num.textContent=timeLeft;}
function flash(type){const el=document.getElementById('flashOv');el.className='flash-ov '+type;setTimeout(()=>el.className='flash-ov',500);}
function showFx(txt,x,y,color,size){const d=document.createElement('div');d.className='fx';d.textContent=txt;d.style.cssText=`left:${x}px;top:${y}px;color:${color};font-size:${size}px;`;document.body.appendChild(d);setTimeout(()=>d.remove(),1000);}
function getTEl(r,c){return document.getElementById('gridWrap').querySelector(`.grid-cell[data-pos="${r}-${c}"]`);}
function mx(r,c){const el=getTEl(r,c);if(!el)return window.innerWidth/2;const rect=el.getBoundingClientRect();return rect.left+rect.width/2;}
function my(r,c){const el=getTEl(r,c);if(!el)return window.innerHeight*.4;const rect=el.getBoundingClientRect();return rect.top;}
function openPrivacy(){document.getElementById('privacyModal').classList.remove('hidden');}
function closePrivacy(){document.getElementById('privacyModal').classList.add('hidden');}
function closePrivacyBg(e){if(e.target===document.getElementById('privacyModal'))closePrivacy();}
function openTerms(){document.getElementById('termsModal').classList.remove('hidden');}
function closeTerms(){document.getElementById('termsModal').classList.add('hidden');}
function closeTermsBg(e){if(e.target===document.getElementById('termsModal'))closeTerms();}
function confirmRestart(){if(!running)return;document.getElementById('restartModal').classList.remove('hidden');}
function doRestart(){document.getElementById('restartModal').classList.add('hidden');clearInterval(ticker);clearTimeout(cTimer);clearTimeout(pTimer);clearInterval(oppTimer);stopBGM();stopTickSound();running=false;const ov=document.getElementById('cdOv'),ne=document.getElementById('cdN');ov.classList.remove('hidden');let n=3;ne.textContent=n;const iv=setInterval(()=>{n--;playTone(n>0?440:880,'sine',0.15,0.3);if(n>0){ne.textContent=n;ne.style.animation='none';void ne.offsetWidth;ne.style.animation='';}else{clearInterval(iv);ov.classList.add('hidden');startGame();}},850);}
function cancelRestart(){document.getElementById('restartModal').classList.add('hidden');}
function showBestBurst(){const el=document.getElementById('bestBurst');el.classList.remove('hidden');setTimeout(()=>el.classList.add('hidden'),2100);}
function closeTut(){document.getElementById('tutOv').classList.add('hidden');localStorage.setItem('n10_tutdone','1');firstStart();}
function firstStart(){if(!localStorage.getItem('n10_tutdone')){document.getElementById('tutOv').classList.remove('hidden');return;}showScreen(null);sndStart();const ov=document.getElementById('cdOv'),ne=document.getElementById('cdN');ov.classList.remove('hidden');let n=3;ne.textContent=n;const iv=setInterval(()=>{n--;playTone(n>0?440:880,'sine',0.15,0.3);if(n>0){ne.textContent=n;ne.style.animation='none';void ne.offsetWidth;ne.style.animation='';}else{clearInterval(iv);ov.classList.add('hidden');startGame();}},850);}
function instantRetry(){sndStart();const ov=document.getElementById('cdOv'),ne=document.getElementById('cdN');ov.classList.remove('hidden');let n=3;ne.textContent=n;const iv=setInterval(()=>{n--;playTone(n>0?440:880,'sine',0.15,0.3);if(n>0){ne.textContent=n;ne.style.animation='none';void ne.offsetWidth;ne.style.animation='';}else{clearInterval(iv);ov.classList.add('hidden');startGame();}},850);}
function startGame(){
  if(typeof stopLbListen==='function')stopLbListen();
  stopBGM();clearInterval(ticker);clearTimeout(cTimer);clearTimeout(pTimer);clearInterval(oppTimer);stopTickSound();
  board=[];sel=[];score=0;cleared=0;combo=0;timeLeft=DURATION;running=true;tid=0;oppScore=0;dSMS=new Set();dCMS=new Set();dc3hits=0;pressureActive=false;
  if(typeof analyticsLog==='function')analyticsLog('game_start',{skin:settings&&settings.skin||'classic'});
  document.getElementById('panicBorder').className='panic-border';
  initBoard();updateScore();updateCombo();updateSumBar(0);updateTimer();updatePVP();showScreen('game');buildGrid();startOpp();startBGM();
  ticker=setInterval(()=>{timeLeft--;updateTimer();if(timeLeft===40||timeLeft===15)startPressure();if(timeLeft>0&&timeLeft%10===0&&timeLeft<50){const lt=_T[_curLang]||_T.ko;const rush=document.createElement('div');rush.className='milestone';rush.textContent=timeLeft<=15?lt.rush3:timeLeft<=30?lt.rush2:lt.rush1;document.body.appendChild(rush);setTimeout(()=>rush.remove(),1800);}if(timeLeft<=0){clearInterval(ticker);clearTimeout(pTimer);clearInterval(oppTimer);running=false;pressureActive=false;stopBGM();sndGameOver();checkDailyChallenge();setTimeout(showResult,150);}},1000);
}
function handleResultTap(e){if(e.target.tagName==='BUTTON'||e.target.tagName==='svg'||e.target.tagName==='path'||e.target.tagName==='circle'||e.target.closest('.lb-card')||e.target.closest('.share-section')||e.target.closest('button'))return;instantRetry();}
function showResult(){
  document.getElementById('panicBorder').className='panic-border';
  const isNewBest=score>best;if(isNewBest){best=score;localStorage.setItem('n10best',best);}
  if(typeof analyticsLog==='function')analyticsLog('game_over',{score:score,cleared:cleared,is_new_best:isNewBest,best:best});
  if(typeof fbSubmit==='function'){fbSubmit(score).then(()=>{if(typeof fbLeaderboard==='function')fbLeaderboard(score);}).catch(()=>{if(typeof fbLeaderboard==='function')fbLeaderboard(score);});}else{if(typeof fbLeaderboard==='function')fbLeaderboard(score);}
  const g=[...GRADES].reverse().find(g=>score>=g.min)||GRADES[0];
  document.getElementById('resEmoji').textContent=g.e;
  const ge=document.getElementById('resGrade');ge.textContent=gradeTitle(g);ge.style.cssText=`background:${g.bg};color:${g.c}`;
  document.getElementById('resTiles').textContent=cleared;
  document.getElementById('resBest').innerHTML=`BEST: <b>${best}</b>`;
  const gapEl=document.getElementById('resBestGap');if(gapEl){const lt=_T[_curLang]||_T.ko;const gap=best-score;if(gap>0)gapEl.textContent=lt.bestGapMore.replace('{n}',gap);else gapEl.textContent=lt.bestGapNew;}
  showScreen('result');
  const scoreEl=document.getElementById('resScore');scoreEl.textContent='0';
  const duration=800,steps=40,increment=score/steps;let current=0;
  const iv=setInterval(()=>{current=Math.min(current+increment,score);scoreEl.textContent=Math.floor(current);if(current>=score){clearInterval(iv);scoreEl.textContent=score;if(isNewBest)showBestBurst();}},duration/steps);
}
function showScreen(name){['start','game','result'].forEach(n=>document.getElementById(n+'Screen').classList.add('hidden'));if(name)document.getElementById(name+'Screen').classList.remove('hidden');}
function shareScore(){
  const g=[...GRADES].reverse().find(g=>score>=g.min)||GRADES[0];const rankTxt=document.getElementById('resRank').textContent||'';
  const canvas=document.createElement('canvas');canvas.width=600;canvas.height=360;const ctx=canvas.getContext('2d');
  const grad=ctx.createLinearGradient(0,0,600,360);grad.addColorStop(0,'#fef6ff');grad.addColorStop(1,'#ffe0f5');ctx.fillStyle=grad;ctx.beginPath();ctx.roundRect(0,0,600,360,28);ctx.fill();ctx.strokeStyle='#ff9fd3';ctx.lineWidth=4;ctx.beginPath();ctx.roundRect(2,2,596,356,26);ctx.stroke();
  const lt4=(_T[_curLang]||_T.ko);ctx.fillStyle='#ff6eb4';ctx.font='bold 36px sans-serif';ctx.textAlign='center';ctx.fillText(lt4.logoTitle+' ğŸ±',300,52);ctx.fillStyle=g.bg;ctx.beginPath();ctx.roundRect(220,70,160,38,20);ctx.fill();ctx.fillStyle=g.c;ctx.font='bold 20px sans-serif';ctx.textAlign='center';ctx.fillText(gradeTitle(g),300,95);ctx.font='90px sans-serif';ctx.fillText(g.e,300,185);ctx.fillStyle='#ff6eb4';ctx.font='bold 86px sans-serif';ctx.shadowColor='#d94d96';ctx.shadowOffsetY=5;ctx.shadowBlur=0;ctx.fillText(score+lt4.scoreSuffix,300,288);ctx.shadowColor='transparent';if(rankTxt){ctx.fillStyle='#4ecdc4';ctx.font='bold 18px sans-serif';ctx.fillText(rankTxt,300,320);}ctx.fillStyle='#b89db8';ctx.font='bold 14px sans-serif';ctx.fillText(lt4.shareChallenge+' '+score+lt4.scoreSuffix,300,348);
  canvas.toBlob(blob=>{const file=new File([blob],'nyang10.png',{type:'image/png'});if(navigator.canShare&&navigator.canShare({files:[file]})){navigator.share({files:[file],title:lt4.logoTitle,text:`${g.e} ${gradeTitle(g)} â€” ${score}${lt4.scoreSuffix}!\n${rankTxt}`}).catch(()=>{});}else{const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download='nyang10_score.png';a.click();URL.revokeObjectURL(url);}},  'image/png');
}
function getShareText(){const g=[...GRADES].reverse().find(g=>score>=g.min)||GRADES[0];const rankTxt=document.getElementById('resRank').textContent||'';const lt=_T[_curLang]||_T.ko;return`${g.e} ${lt.shareAch}${score}${lt.shareScore}${rankTxt?rankTxt+' ':''}${lt.shareChallenge} ${lt.shareTag}`;}
function getGameUrl(){return location.href.split('?')[0];}
function shareToX(){window.open(`https://x.com/intent/post?text=${encodeURIComponent(getShareText()+'\n'+getGameUrl())}`,'_blank');}
function shareToThreads(){window.open(`https://www.threads.com/intent/post?text=${encodeURIComponent(getShareText()+'\n'+getGameUrl())}`,'_blank');}
function shareToKakao(){const txt=getShareText()+'\n'+getGameUrl();navigator.clipboard.writeText(txt).then(()=>showToast('ì¹´í†¡ì— ë¶™ì—¬ë„£ê¸° í•´ì£¼ì„¸ìš”! ğŸ“‹')).catch(()=>showToast('ë§í¬ë¥¼ ë³µì‚¬í•´ì„œ ì¹´í†¡ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”!'));}
function copyLink(){const txt=getShareText()+'\n'+getGameUrl();navigator.clipboard.writeText(txt).then(()=>showToast('í´ë¦½ë³´ë“œì— ë³µì‚¬ëì–´ìš”! ğŸ“‹')).catch(()=>showToast('ë³µì‚¬ ì‹¤íŒ¨ ğŸ˜¢'));}
function showToast(msg){const t=document.createElement('div');t.style.cssText='position:fixed;bottom:80px;left:50%;transform:translateX(-50%);background:#3d2645;color:white;padding:10px 20px;border-radius:20px;font-family:Nunito,sans-serif;font-weight:800;font-size:13px;z-index:999;white-space:nowrap;box-shadow:0 4px 20px rgba(0,0,0,.2);';t.textContent=msg;document.body.appendChild(t);setTimeout(()=>t.remove(),2500);}

showScreen('start');
loadSettingsData();
(()=>{const skin=CAT_SKINS&&CAT_SKINS.find(s=>s.id===settings.skin);if(skin)window._curSkin=skin;})();

const DAILY_CHALLENGES=[
  {id:'combo5',  text:'ì½¤ë³´ 5 ë‹¬ì„±í•˜ê¸° ğŸ”¥',    check:()=>dCMS.has(5)||combo>=5},
  {id:'score100',text:'100ì  ë‹¬ì„±í•˜ê¸° ğŸ’¯',      check:()=>score>=100},
  {id:'tile20',  text:'íƒ€ì¼ 20ê°œ ì œê±°í•˜ê¸° ğŸ±',  check:()=>cleared>=20},
  {id:'score200',text:'200ì  ë‹¬ì„±í•˜ê¸° ğŸ‘‘',      check:()=>score>=200},
  {id:'combo3x2',text:'3ì½¤ë³´ ë‘ ë²ˆ ë‹¬ì„±í•˜ê¸° âš¡',check:()=>dc3hits>=2},
];
function todayChallenge(){const d=new Date();const idx=(d.getFullYear()*366+d.getMonth()*31+d.getDate())%DAILY_CHALLENGES.length;return DAILY_CHALLENGES[idx];}
function initDailyChallenge(){const ch=todayChallenge();const key='n10_dc_'+new Date().toDateString();const done=localStorage.getItem(key)==='1';document.getElementById('dcText').textContent=ch.text;document.getElementById('dcStatus').textContent=done?'âœ…':'â¬œ';}
function checkDailyChallenge(){const ch=todayChallenge();const key='n10_dc_'+new Date().toDateString();if(localStorage.getItem(key)==='1')return;if(ch.check()){localStorage.setItem(key,'1');document.getElementById('dcStatus').textContent='âœ…';showMS('ğŸ¯ ì˜¤ëŠ˜ì˜ ë¯¸ì…˜ ì™„ë£Œ!');}}
initDailyChallenge();

const SKIN_UNLOCK={classic:{unlocked:true},fancy:{unlocked:()=>best>=50,hint:'BEST 50ì  ë‹¬ì„±'},star:{unlocked:()=>best>=100,hint:'BEST 100ì  ë‹¬ì„±'},food:{unlocked:()=>best>=150,hint:'BEST 150ì  ë‹¬ì„±'},pure:{unlocked:()=>best>=200,hint:'BEST 200ì  ë‹¬ì„±'}};
function isSkinUnlocked(id){const u=SKIN_UNLOCK[id];if(!u)return true;return u.unlocked===true||(typeof u.unlocked==='function'&&u.unlocked());}
</script>
<script>
const _T={
  ko:{logoTitle:'ëƒ¥10',logoSub:'NUMBER PUZZLE',liveTxt:'ì§€ê¸ˆ í”Œë ˆì´ ì¤‘',playerUnit:'ëª…',dcBadge:'ğŸ“… ì˜¤ëŠ˜ì˜ ë¯¸ì…˜',rule1:'ê³ ì–‘ì´ íƒ­ â†’ í•©ì´ <strong>10</strong>ì´ ë˜ë©´ ëƒ¥~âœ¨',rule2:'ì‹œê°„ ì§€ë‚ ìˆ˜ë¡ ê³ ì–‘ì´ ìŸì•„ì§!',rule3:'60ì´ˆ ì•ˆì— ìµœëŒ€í•œ ë§ì´!',startBtn:'ğŸ¾ START!',resTop:'GAME OVER',retryBtn:'ğŸ”„ ë‹¤ì‹œí•˜ê¸°',retryHint:'í™”ë©´ ì•„ë¬´ë°ë‚˜ íƒ­í•´ë„ ì‹œì‘í•´ìš” âš¡',shareLabel:'ê³µìœ í•˜ê¸°',shareLabels:['X','Threads','ì¹´í†¡','ë§í¬ë³µì‚¬','ë”ë³´ê¸°'],bestBurst:'ğŸ† ìµœê³ ì  ê²½ì‹ !',tutTitle:'ì´ë ‡ê²Œ í•´ë´ìš”!',tutS1:'1ï¸âƒ£ ìˆ«ì ê³ ì–‘ì´ë¥¼ <b>íƒ­</b>í•´ì„œ ì„ íƒ',tutS2:'2ï¸âƒ£ ì„ íƒí•œ í•©ì´ <b>10</b>ì´ ë˜ë©´ ìë™ ì œê±°!',tutS3:'3ï¸âƒ£ í•œë²ˆì— 3ê°œ ì´ìƒ â†’ <b>ë³´ë„ˆìŠ¤ ì ìˆ˜ ğŸ”¥</b>',tutS4:'4ï¸âƒ£ ì—°ì†ìœ¼ë¡œ ì„±ê³µí•˜ë©´ <b>ì½¤ë³´!</b>',tutBtn:'ì‹œì‘í•˜ê¸° ğŸ¾',cdSub:'ê³ ì–‘ì´ë“¤ ì¶œë™ ì¤€ë¹„ ì¤‘...',dc:['ì½¤ë³´ 5 ë‹¬ì„±í•˜ê¸° ğŸ”¥','100ì  ë‹¬ì„±í•˜ê¸° ğŸ’¯','íƒ€ì¼ 20ê°œ ì œê±°í•˜ê¸° ğŸ±','200ì  ë‹¬ì„±í•˜ê¸° ğŸ‘‘','3ì½¤ë³´ ë‘ ë²ˆ ë‹¬ì„±í•˜ê¸° âš¡'],sumPick:'ê³ ì–‘ì´ë¥¼ ê³¨ë¼ë´ ğŸ±',sumDone:'ì™„ì„±! ',sumMore1:'ë”ë©´ ë¼!',sumMore2:'ë”! âš¡ë³´ë„ˆìŠ¤',rush3:'âš¡ ë§‰íŒì´ë‹¤!',rush2:'ğŸ”¥ ì†ë„ë¥¼ ì˜¬ë ¤!',rush1:'ğŸ’¨ ì§‘ì¤‘!',shareAch:'ëƒ¥10ì—ì„œ ',shareScore:'ì  ë‹¬ì„±! ',shareChallenge:'ë‚˜ë³´ë‹¤ ì˜í•˜ë©´ ì¸ì • ğŸ¾',shareTag:'#ëƒ¥10 #ìˆ«ìí¼ì¦',grades:['ëƒ¥ì•Œë°”ìƒ','ì§‘ì‚¬ ì§€ë§ìƒ','ì§‘ì‚¬ê³„ ì¤‘ê°„ë³´ìŠ¤','ì§‘ì‚¬ê³„ ë ˆì „ë“œ','ëƒ¥ì‹ ë‚´ë¦¼ ë°›ì€ ì','í™˜ìƒí•œ ê³ ì–‘ì´'],noRecord:'ì•„ì§ ê¸°ë¡ ì—†ìŒ',meLabel:'ë‚˜',rankTxt:'ì „ì²´ {total}ëª… ì¤‘ ìƒìœ„ {pct}% Â· {rank}ìœ„',scoreSuffix:'ì ',settingsTitle:'âš™ï¸ ì„¤ì •',nickname:'ğŸ˜º ë‹‰ë„¤ì„',nickPlaceholder:'ë‹‰ë„¤ì„ ì…ë ¥ (ìµœëŒ€ 12ì)',saveBtn:'ì €ì¥',nightMode:'ğŸŒ™ ë‚˜ì´íŠ¸ ëª¨ë“œ',bgmLabel:'ğŸµ ë°°ê²½ìŒì•…',sfxLabel:'ğŸ”Š íš¨ê³¼ìŒ',vibLabel:'ğŸ“³ ì§„ë™',skinLabel:'ğŸ± ê³ ì–‘ì´ ìŠ¤í‚¨',themeLabel:'ğŸ¨ ìƒ‰ìƒ í…Œë§ˆ',saveAll:'ì €ì¥ ğŸ’¾',changeNick:'ë‹‰ë„¤ì„ ë³€ê²½',privacy:'ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨',terms:'ì´ìš©ì•½ê´€',coffee:'ğŸ§‹ ì»¤í”¼ í•œ ì”',sumLbl:'í•©ê³„',resSub1:'íƒ€ì¼',resSub2:'ê°œ ì œê±°',lbTitle:'ğŸ† ì˜¤ëŠ˜ì˜ TOP 5',loading:'ë¡œë”© ì¤‘...',restartTitle:'ë‹¤ì‹œ ì‹œì‘í• ê¹Œìš”?',restartSub:'ì§€ê¸ˆ ì ìˆ˜ê°€ ì‚¬ë¼ì ¸ìš”!',cancel:'ì·¨ì†Œ',restartBtn:'ë‹¤ì‹œì‹œì‘!',nickEmpty:'ë‹‰ë„¤ì„ì„ ì…ë ¥í•´ì¤˜ìš” ğŸ±',nickSaved:'ë‹‰ë„¤ì„ ì €ì¥! ğŸ˜º ',bestGapMore:'ìµœê³ ì ê¹Œì§€ ë”± {n}ì ! í•œ ë²ˆë§Œ ë”! ğŸ”¥',bestGapNew:'ğŸ† ìµœê³ ì  ê²½ì‹ !',privacyTitle:'ğŸ”’ ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨',termsTitle:'ğŸ“„ ì´ìš©ì•½ê´€',confirm:'í™•ì¸ âœ…'},
  en:{logoTitle:'Nyan10',logoSub:'NUMBER PUZZLE',liveTxt:'Now Playing',playerUnit:' online',dcBadge:'ğŸ“… Daily Mission',rule1:'Tap cats â†’ Sum to <strong>10</strong> and nyan~âœ¨',rule2:'More cats drop as time passes!',rule3:'Score as much as you can in 60s!',startBtn:'ğŸ¾ START!',resTop:'GAME OVER',retryBtn:'ğŸ”„ Play Again',retryHint:'Tap anywhere to start âš¡',shareLabel:'SHARE',shareLabels:['X','Threads','KakaoTalk','Copy Link','More'],bestBurst:'ğŸ† New High Score!',tutTitle:'How to Play!',tutS1:'1ï¸âƒ£ <b>Tap</b> number cats to select',tutS2:'2ï¸âƒ£ Auto-removed when sum hits <b>10</b>!',tutS3:'3ï¸âƒ£ 3+ at once â†’ <b>Bonus score ğŸ”¥</b>',tutS4:'4ï¸âƒ£ Consecutive success = <b>Combo!</b>',tutBtn:"Let's Go ğŸ¾",cdSub:'Cats getting ready...',dc:['Achieve Combo 5 ğŸ”¥','Score 100 points ğŸ’¯','Clear 20 tiles ğŸ±','Score 200 points ğŸ‘‘','Achieve Combo 3 twice âš¡'],sumPick:'Pick a cat ğŸ±',sumDone:'Perfect! ',sumMore1:'more to go!',sumMore2:'more! âš¡Bonus',rush3:'âš¡ Final push!',rush2:'ğŸ”¥ Speed it up!',rush1:'ğŸ’¨ Focus!',shareAch:'I scored ',shareScore:' on Nyan10! ',shareChallenge:'Beat me if you can ğŸ¾',shareTag:'#Nyan10 #NumberPuzzle',grades:['Nyan Rookie','Aspiring Butler','Mid-Boss Butler','Legendary Butler','Blessed by Nyan Gods','Reincarnated Cat'],noRecord:'No records yet',meLabel:'me',rankTxt:'Top {pct}% of {total} Â· #{rank}',scoreSuffix:' pts',settingsTitle:'âš™ï¸ Settings',nickname:'ğŸ˜º Nickname',nickPlaceholder:'Enter nickname (max 12 chars)',saveBtn:'Save',nightMode:'ğŸŒ™ Night Mode',bgmLabel:'ğŸµ BGM',sfxLabel:'ğŸ”Š Sound FX',vibLabel:'ğŸ“³ Vibration',skinLabel:'ğŸ± Cat Skin',themeLabel:'ğŸ¨ Color Theme',saveAll:'Save ğŸ’¾',changeNick:'Change Nickname',privacy:'Privacy Policy',terms:'Terms of Service',coffee:'ğŸ§‹ Buy me a coffee',sumLbl:'SUM',resSub1:'',resSub2:' tiles cleared',lbTitle:'ğŸ† Today\'s TOP 5',loading:'Loading...',restartTitle:'Restart?',restartSub:'Your current score will be lost!',cancel:'Cancel',restartBtn:'Restart!',nickEmpty:'Please enter a nickname ğŸ±',nickSaved:'Nickname saved! ğŸ˜º ',bestGapMore:'Just {n} more to beat your best! ğŸ”¥',bestGapNew:'ğŸ† New High Score!',privacyTitle:'ğŸ”’ Privacy Policy',termsTitle:'ğŸ“„ Terms of Service',confirm:'Confirm âœ…'},
  ja:{logoTitle:'ã«ã‚ƒã‚“10',logoSub:'ãƒŠãƒ³ãƒãƒ¼ãƒ‘ã‚ºãƒ«',liveTxt:'ãƒ—ãƒ¬ã‚¤ä¸­',playerUnit:'äºº',dcBadge:'ğŸ“… ä»Šæ—¥ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³',rule1:'ã­ã“ã‚’ã‚¿ãƒƒãƒ— â†’ åˆè¨ˆ<strong>10</strong>ã§ã«ã‚ƒã‚“~âœ¨',rule2:'æ™‚é–“ãŒçµŒã¤ã»ã©ã­ã“ãŒé™ã£ã¦ãã‚‹ï¼',rule3:'60ç§’ã§ã§ãã‚‹ã ã‘ãŸãã•ã‚“ï¼',startBtn:'ğŸ¾ ã‚¹ã‚¿ãƒ¼ãƒˆï¼',resTop:'ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼',retryBtn:'ğŸ”„ ã‚‚ã†ä¸€åº¦',retryHint:'ç”»é¢ã®ã©ã“ã§ã‚‚ã‚¿ãƒƒãƒ—ã§ã‚¹ã‚¿ãƒ¼ãƒˆ âš¡',shareLabel:'ã‚·ã‚§ã‚¢',shareLabels:['X','Threads','ã‚«ã‚«ã‚ª','ãƒªãƒ³ã‚¯ã‚³ãƒ”ãƒ¼','ã‚‚ã£ã¨'],bestBurst:'ğŸ† ãƒã‚¤ã‚¹ã‚³ã‚¢æ›´æ–°ï¼',tutTitle:'ã‚ãã³ã‹ãŸï¼',tutS1:'1ï¸âƒ£ æ•°å­—ã­ã“ã‚’<b>ã‚¿ãƒƒãƒ—</b>ã—ã¦é¸ã¶',tutS2:'2ï¸âƒ£ åˆè¨ˆãŒ<b>10</b>ã«ãªã£ãŸã‚‰è‡ªå‹•æ¶ˆå»ï¼',tutS3:'3ï¸âƒ£ ä¸€åº¦ã«3å€‹ä»¥ä¸Š â†’ <b>ãƒœãƒ¼ãƒŠã‚¹ç‚¹ ğŸ”¥</b>',tutS4:'4ï¸âƒ£ é€£ç¶šæˆåŠŸã§<b>ã‚³ãƒ³ãƒœï¼</b>',tutBtn:'ã¯ã˜ã‚ã‚‹ ğŸ¾',cdSub:'ã­ã“ãŸã¡å‡ºå‹•æº–å‚™ä¸­...',dc:['ã‚³ãƒ³ãƒœ5é”æˆ ğŸ”¥','100ç‚¹é”æˆ ğŸ’¯','ã‚¿ã‚¤ãƒ«20å€‹æ¶ˆå» ğŸ±','200ç‚¹é”æˆ ğŸ‘‘','ã‚³ãƒ³ãƒœ3ã‚’2å›é”æˆ âš¡'],sumPick:'ã­ã“ã‚’é¸ã‚“ã§ã­ ğŸ±',sumDone:'å®Œæˆï¼',sumMore1:'ã§OKï¼',sumMore2:'ã§ãƒœãƒ¼ãƒŠã‚¹ï¼âš¡',rush3:'âš¡ ãƒ©ã‚¹ãƒˆã‚¹ãƒ‘ãƒ¼ãƒˆï¼',rush2:'ğŸ”¥ åŠ é€Ÿã—ã¦ï¼',rush1:'ğŸ’¨ é›†ä¸­ï¼',shareAch:'ã«ã‚ƒã‚“10ã§',shareScore:'ç‚¹é”æˆï¼',shareChallenge:'å‹ã¦ã‚‹ã‹ãªğŸ¾',shareTag:'#ã«ã‚ƒã‚“10 #ãƒŠãƒ³ãƒãƒ¼ãƒ‘ã‚ºãƒ«',grades:['ã«ã‚ƒã‚“ãƒã‚¤ãƒˆ','åŸ·äº‹è¦‹ç¿’ã„','åŸ·äº‹ç•Œã®ä¸­ãƒœã‚¹','åŸ·äº‹ç•Œã®ãƒ¬ã‚¸ã‚§ãƒ³ãƒ‰','ã«ã‚ƒã‚“ç¥é™è‡¨','è»¢ç”Ÿã—ãŸçŒ«'],noRecord:'ã¾ã è¨˜éŒ²ãªã—',meLabel:'è‡ªåˆ†',rankTxt:'{total}äººä¸­ä¸Šä½{pct}% Â· {rank}ä½',scoreSuffix:'ç‚¹',settingsTitle:'âš™ï¸ è¨­å®š',nickname:'ğŸ˜º ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ',nickPlaceholder:'ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ å…¥åŠ›ï¼ˆæœ€å¤§12æ–‡å­—ï¼‰',saveBtn:'ä¿å­˜',nightMode:'ğŸŒ™ ãƒŠã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰',bgmLabel:'ğŸµ BGM',sfxLabel:'ğŸ”Š åŠ¹æœéŸ³',vibLabel:'ğŸ“³ ãƒã‚¤ãƒ–',skinLabel:'ğŸ± ã­ã“ã‚¹ã‚­ãƒ³',themeLabel:'ğŸ¨ ã‚«ãƒ©ãƒ¼ãƒ†ãƒ¼ãƒ',saveAll:'ä¿å­˜ ğŸ’¾',changeNick:'ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ å¤‰æ›´',privacy:'ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼',terms:'åˆ©ç”¨è¦ç´„',coffee:'ğŸ§‹ ã‚³ãƒ¼ãƒ’ãƒ¼ã‚’å¥¢ã‚‹',sumLbl:'åˆè¨ˆ',resSub1:'ã‚¿ã‚¤ãƒ«',resSub2:'å€‹æ¶ˆå»',lbTitle:'ğŸ† ä»Šæ—¥ã®TOP 5',loading:'èª­è¾¼ä¸­...',restartTitle:'ãƒªã‚¹ã‚¿ãƒ¼ãƒˆã—ã¾ã™ã‹ï¼Ÿ',restartSub:'ä»Šã®ã‚¹ã‚³ã‚¢ãŒæ¶ˆãˆã¾ã™ï¼',cancel:'ã‚­ãƒ£ãƒ³ã‚»ãƒ«',restartBtn:'ãƒªã‚¹ã‚¿ãƒ¼ãƒˆï¼',nickEmpty:'ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ ğŸ±',nickSaved:'ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ä¿å­˜ï¼ğŸ˜º ',bestGapMore:'ã‚ã¨{n}ç‚¹ã§ãƒ™ã‚¹ãƒˆæ›´æ–°ï¼ğŸ”¥',bestGapNew:'ğŸ† ãƒã‚¤ã‚¹ã‚³ã‚¢æ›´æ–°ï¼',privacyTitle:'ğŸ”’ ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼',termsTitle:'ğŸ“„ åˆ©ç”¨è¦ç´„',confirm:'ç¢ºèª âœ…'}
};
let _curLang=localStorage.getItem('n10_lang')||'ko';
function nLang(l){
  _curLang=l;localStorage.setItem('n10_lang',l);
  ['ko','en','ja'].forEach(k=>{const b=document.getElementById('lb_'+k);if(b)b.classList.toggle('active',k===l);});
  const t=_T[l];const $=id=>document.getElementById(id);
  if($('nLogoTitle'))$('nLogoTitle').textContent=t.logoTitle;
  if($('nLogoSub'))$('nLogoSub').textContent=t.logoSub;
  if($('nLiveTxt'))$('nLiveTxt').textContent=t.liveTxt;
  if($('nDcBadge'))$('nDcBadge').textContent=t.dcBadge;
  if($('nRule1'))$('nRule1').innerHTML=t.rule1;
  if($('nRule2'))$('nRule2').textContent=t.rule2;
  if($('nRule3'))$('nRule3').textContent=t.rule3;
  if($('nStartBtn'))$('nStartBtn').textContent=t.startBtn;
  if($('nResTop'))$('nResTop').textContent=t.resTop;
  if($('nRetryBtn'))$('nRetryBtn').textContent=t.retryBtn;
  if($('nRetryHint'))$('nRetryHint').textContent=t.retryHint;
  if($('nShareLabel'))$('nShareLabel').textContent=t.shareLabel;
  if($('nBestBurst'))$('nBestBurst').textContent=t.bestBurst;
  if($('nTutTitle'))$('nTutTitle').textContent=t.tutTitle;
  if($('nTutS1'))$('nTutS1').innerHTML=t.tutS1;
  if($('nTutS2'))$('nTutS2').innerHTML=t.tutS2;
  if($('nTutS3'))$('nTutS3').innerHTML=t.tutS3;
  if($('nTutS4'))$('nTutS4').innerHTML=t.tutS4;
  if($('nTutBtn'))$('nTutBtn').textContent=t.tutBtn;
  if($('nCdSub'))$('nCdSub').textContent=t.cdSub;
  t.shareLabels.forEach((v,i)=>{const el=$('nSL'+i);if(el)el.textContent=v;});
  const dcEl=$('dcText');
  if(dcEl){const d=new Date();const idx=(d.getFullYear()*366+d.getMonth()*31+d.getDate())%t.dc.length;dcEl.textContent=t.dc[idx];}
  if($('nSettingsTitle'))$('nSettingsTitle').textContent=t.settingsTitle;
  if($('nNicknameLabel'))$('nNicknameLabel').textContent=t.nickname;
  if($('nSaveNickBtn'))$('nSaveNickBtn').textContent=t.saveBtn;
  const ni=$('nicknameInput');if(ni)ni.placeholder=t.nickPlaceholder;
  if($('nNightMode'))$('nNightMode').textContent=t.nightMode;
  if($('nBgmLabel'))$('nBgmLabel').textContent=t.bgmLabel;
  if($('nSfxLabel'))$('nSfxLabel').textContent=t.sfxLabel;
  if($('nVibLabel'))$('nVibLabel').textContent=t.vibLabel;
  if($('nSkinLabel'))$('nSkinLabel').textContent=t.skinLabel;
  if($('nThemeLabel'))$('nThemeLabel').textContent=t.themeLabel;
  if($('nSaveAll'))$('nSaveAll').textContent=t.saveAll;
  if($('nChangeNick'))$('nChangeNick').textContent=t.changeNick;
  if($('nPrivacyLink'))$('nPrivacyLink').textContent=t.privacy;
  if($('nTermsLink'))$('nTermsLink').textContent=t.terms;
  if($('nCoffeeLink'))$('nCoffeeLink').textContent=t.coffee;
  if($('nSumLbl'))$('nSumLbl').textContent=t.sumLbl;
  if($('nResSub1'))$('nResSub1').textContent=t.resSub1;
  if($('nResSub2'))$('nResSub2').textContent=t.resSub2;
  if($('nLbTitle'))$('nLbTitle').textContent=t.lbTitle;
  const lb=$('lbList');if(lb&&lb.textContent.trim()===lb.getAttribute('data-loading')||lb&&lb.textContent.trim()==='ë¡œë”© ì¤‘...'||lb&&lb.textContent.trim()==='Loading...'||lb&&lb.textContent.trim()==='èª­è¾¼ä¸­...')lb.textContent=t.loading;
  if($('nRestartTitle'))$('nRestartTitle').textContent=t.restartTitle;
  if($('nRestartSub'))$('nRestartSub').textContent=t.restartSub;
  if($('nCancelBtn'))$('nCancelBtn').textContent=t.cancel;
  if($('nRestartBtn'))$('nRestartBtn').textContent=t.restartBtn;
  if($('nTermsTitle'))$('nTermsTitle').textContent=t.termsTitle;
  if($('nPrivacyTitle'))$('nPrivacyTitle').textContent=t.privacyTitle;
  if($('nTermsConfirm'))$('nTermsConfirm').textContent=t.confirm;
  if($('nPrivacyConfirm'))$('nPrivacyConfirm').textContent=t.confirm;
  updateLegalContent(l);
}
document.addEventListener('DOMContentLoaded',()=>{nLang(_curLang);updateLegalContent(_curLang);});
</script>

<script>
const _LEGAL = {
  ko: {
    termsContent: `
      <p style="margin-bottom:10px;color:var(--dim);">ì‹œí–‰ì¼: 2026ë…„ 1ì›” 1ì¼</p>
      <b>ì œ1ì¡° (ëª©ì )</b>
      <p style="margin:6px 0 12px;">ì´ ì•½ê´€ì€ ëƒ¥10(ì´í•˜ "ì„œë¹„ìŠ¤")ì´ ì œê³µí•˜ëŠ” ì›¹ ê²Œì„ ì„œë¹„ìŠ¤ì˜ ì´ìš© ì¡°ê±´ ë° ì ˆì°¨, ì´ìš©ìì™€ ì„œë¹„ìŠ¤ ê°„ì˜ ê¶Œë¦¬Â·ì˜ë¬´ ë° ì±…ì„ì‚¬í•­ì„ ê·œì •í•©ë‹ˆë‹¤.</p>
      <b>ì œ2ì¡° (ì´ìš© ìê²©)</b>
      <p style="margin:6px 0 12px;">ì„œë¹„ìŠ¤ëŠ” ë§Œ 13ì„¸ ì´ìƒ ëˆ„êµ¬ë‚˜ ë¬´ë£Œë¡œ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œ 13ì„¸ ë¯¸ë§Œì€ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ëŒ€í•œë¯¼êµ­ì˜ ê²½ìš° ë§Œ 14ì„¸ ë¯¸ë§Œì€ ë²•ì •ëŒ€ë¦¬ì¸ì˜ ë™ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.</p>
      <b>ì œ3ì¡° (ê¸ˆì§€ í–‰ìœ„)</b>
      <p style="margin:6px 0 12px;">- ë¦¬ë”ë³´ë“œ ì ìˆ˜ ì¡°ì‘Â·ì–´ë·°ì§•Â·í•µ ì‚¬ìš© ë“± ë¶€ì •í•œ ë°©ë²•ì˜ ì ìˆ˜ ì·¨ë“<br>- íƒ€ ì´ìš©ìì˜ ê²Œì„ ì§„í–‰ì„ ë°©í•´í•˜ëŠ” í–‰ìœ„<br>- ì„œë¹„ìŠ¤ì˜ ì •ìƒì ì¸ ìš´ì˜ì„ ë°©í•´í•˜ëŠ” í–‰ìœ„</p>
      <b>ì œ4ì¡° (ì„œë¹„ìŠ¤ ë³€ê²½ ë° ì¤‘ë‹¨)</b>
      <p style="margin:6px 0 12px;">ì„œë¹„ìŠ¤ëŠ” ìš´ì˜ ì •ì±…ì— ë”°ë¼ ì‚¬ì „ ê³ ì§€ ì—†ì´ ë³€ê²½ë˜ê±°ë‚˜ ì¤‘ë‹¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
      <b>ì œ5ì¡° (ì±…ì„ì˜ í•œê³„)</b>
      <p style="margin:6px 0 12px;">ì„œë¹„ìŠ¤ëŠ” ì´ìš©ìì˜ ê·€ì±… ì‚¬ìœ ë¡œ ë°œìƒí•œ ì†í•´ì— ëŒ€í•´ ì±…ì„ì„ ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¨, ì„œë¹„ìŠ¤ì˜ ê³ ì˜ ë˜ëŠ” ì¤‘ëŒ€í•œ ê³¼ì‹¤ë¡œ ì¸í•œ ì†í•´ì— ëŒ€í•´ì„œëŠ” ê´€ë ¨ ë²•ë ¹ì— ë”°ë¼ ì±…ì„ì„ ì§‘ë‹ˆë‹¤.</p>
      <b>ì œ6ì¡° (ì¤€ê±°ë²• ë° ë¶„ìŸí•´ê²°)</b>
      <p style="margin:6px 0 12px;">ì´ ì•½ê´€ì€ ëŒ€í•œë¯¼êµ­ ë²•ë¥ ì— ë”°ë¼ í•´ì„ë©ë‹ˆë‹¤. ë¶„ìŸì€ ì„œìš¸ì¤‘ì•™ì§€ë°©ë²•ì›ì„ ê´€í• ë¡œ í•©ë‹ˆë‹¤.</p>
      <b>ì œ7ì¡° (ë¬¸ì˜)</b>
      <p style="margin:6px 0 12px;">ğŸ“§ <a href="mailto:bang.a.can@gmail.com" style="color:var(--pink);">bang.a.can@gmail.com</a></p>
`,
    privacyContent: `
      <p style="margin-bottom:10px;color:var(--dim);">ì‹œí–‰ì¼: 2026ë…„ 1ì›” 1ì¼</p>
      <b>1. ìˆ˜ì§‘í•˜ëŠ” ì •ë³´</b>
      <p style="margin:6px 0 12px;">ëƒ¥10ì€ ë‹¤ìŒ ì •ë³´ë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤:<br>- ê¸°ê¸° ê³ ìœ  ì‹ë³„ì (ëœë¤ ìƒì„±, ê°œì¸ íŠ¹ì • ë¶ˆê°€)<br>- ë‹‰ë„¤ì„ (ëœë¤ ìë™ ìƒì„± ë˜ëŠ” ì´ìš©ì ì…ë ¥)<br>- ê²Œì„ ì ìˆ˜ ë° í”Œë ˆì´ ì‹œê°„</p>
      <b>2. ìˆ˜ì§‘ ëª©ì </b>
      <p style="margin:6px 0 12px;">- ì‹¤ì‹œê°„ ë¦¬ë”ë³´ë“œ ìš´ì˜<br>- ë™ì ‘ì ìˆ˜ í‘œì‹œ<br>- ê²Œì„ ì„œë¹„ìŠ¤ í’ˆì§ˆ ê°œì„ </p>
      <b>3. ë³´ê´€ ê¸°ê°„</b>
      <p style="margin:6px 0 12px;">ì ìˆ˜ ë°ì´í„°ëŠ” ë‹¹ì¼ ê¸°ì¤€ìœ¼ë¡œ ê´€ë¦¬ë˜ë©°, ìµœëŒ€ 7ì¼ ì´ë‚´ì— ì‚­ì œë©ë‹ˆë‹¤.</p>
      <b>4. ì œ3ì ì œê³µ</b>
      <p style="margin:6px 0 12px;">ìˆ˜ì§‘ëœ ì •ë³´ëŠ” Firebase(Google LLC, ë¯¸êµ­ ì†Œì¬)ì— ì €ì¥ë©ë‹ˆë‹¤. í•´ë‹¹ ì •ë³´ëŠ” ì œ3ìì—ê²Œ íŒë§¤í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
      <b>5. ì´ìš©ì ê¶Œë¦¬</b>
      <p style="margin:6px 0 12px;">ì´ìš©ìëŠ” ì–¸ì œë“ ì§€ ë³¸ì¸ì˜ ë°ì´í„° ì—´ëŒÂ·ì‚­ì œÂ·ì²˜ë¦¬ ì •ì§€ë¥¼ ìš”ì²­í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
      <b>6. ë¬¸ì˜</b>
      <p style="margin:6px 0 12px;">ğŸ“§ <a href="mailto:bang.a.can@gmail.com" style="color:var(--pink);">bang.a.can@gmail.com</a></p>
`
  },
  en: {
    termsContent: `
      <p style="margin-bottom:10px;color:var(--dim);">Effective: January 1, 2026</p>
      <b>1. Purpose</b>
      <p style="margin:6px 0 12px;">These Terms govern your use of Nyan10, a free web-based puzzle game.</p>
      <b>2. Eligibility</b>
      <p style="margin:6px 0 12px;">The Service is available to users aged 13 and older.</p>
      <b>3. Prohibited Conduct</b>
      <p style="margin:6px 0 12px;">- Manipulating leaderboard scores through cheating or automation<br>- Interfering with other users' gameplay<br>- Disrupting normal operation of the Service</p>
      <b>4. Contact</b>
      <p style="margin:6px 0 12px;">ğŸ“§ <a href="mailto:bang.a.can@gmail.com" style="color:var(--pink);">bang.a.can@gmail.com</a></p>
`,
    privacyContent: `
      <p style="margin-bottom:10px;color:var(--dim);">Effective: January 1, 2026</p>
      <b>1. Information We Collect</b>
      <p style="margin:6px 0 12px;">- A randomly generated device identifier<br>- Nickname (auto-generated or user-entered)<br>- Game scores and play duration</p>
      <b>2. Contact</b>
      <p style="margin:6px 0 12px;">ğŸ“§ <a href="mailto:bang.a.can@gmail.com" style="color:var(--pink);">bang.a.can@gmail.com</a></p>
`
  },
  ja: {
    termsContent: `
      <p style="margin-bottom:10px;color:var(--dim);">æ–½è¡Œæ—¥ï¼š2026å¹´1æœˆ1æ—¥</p>
      <b>ç¬¬1æ¡ï¼ˆç›®çš„ï¼‰</b>
      <p style="margin:6px 0 12px;">æœ¬è¦ç´„ã¯ã€ã«ã‚ƒã‚“10ãŒæä¾›ã™ã‚‹ã‚¦ã‚§ãƒ–ã‚²ãƒ¼ãƒ ã‚µãƒ¼ãƒ“ã‚¹ã®åˆ©ç”¨æ¡ä»¶ã‚’å®šã‚ã¾ã™ã€‚</p>
      <b>ç¬¬2æ¡ï¼ˆãŠå•ã„åˆã‚ã›ï¼‰</b>
      <p style="margin:6px 0 12px;">ğŸ“§ <a href="mailto:bang.a.can@gmail.com" style="color:var(--pink);">bang.a.can@gmail.com</a></p>
`,
    privacyContent: `
      <p style="margin-bottom:10px;color:var(--dim);">æ–½è¡Œæ—¥ï¼š2026å¹´1æœˆ1æ—¥</p>
      <b>1. åé›†ã™ã‚‹æƒ…å ±</b>
      <p style="margin:6px 0 12px;">- ãƒ©ãƒ³ãƒ€ãƒ ç”Ÿæˆã®ç«¯æœ«è­˜åˆ¥å­<br>- ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ <br>- ã‚²ãƒ¼ãƒ ã‚¹ã‚³ã‚¢ãŠã‚ˆã³ãƒ—ãƒ¬ã‚¤æ™‚é–“</p>
      <b>2. ãŠå•ã„åˆã‚ã›</b>
      <p style="margin:6px 0 12px;">ğŸ“§ <a href="mailto:bang.a.can@gmail.com" style="color:var(--pink);">bang.a.can@gmail.com</a></p>
`
  }
};
function updateLegalContent(lang) {
  const l = _LEGAL[lang] || _LEGAL.ko;
  const tc = document.getElementById('termsContent');
  const pc = document.getElementById('privacyContent');
  if (tc) tc.innerHTML = l.termsContent;
  if (pc) pc.innerHTML = l.privacyContent;
}
</script>

<!-- âœ… Service Worker ë“±ë¡ (ì—¬ê¸°ê°€ ì¶”ê°€ëœ ë¶€ë¶„!) -->
<script>
  if ('serviceWorker' in navigator) {
   navigator.serviceWorker.register('/nyang/sw.js');
  }
</script>
</body>
</html>
